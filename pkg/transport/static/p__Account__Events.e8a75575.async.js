(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[859],{16894:function(S,O,e){"use strict";var P=e(4582);O.ZP=P.Z},19273:function(S,O,e){"use strict";e.d(O,{Z:function(){return P}});function P(R){if(R==null)throw new TypeError("Cannot destructure undefined")}},470:function(S){S.exports={logline:"logline___DkIY_",logtime:"logtime___2qPKB"}},57529:function(){},76867:function(S,O,e){"use strict";e.r(O);var P=e(19273),R=e(67294),U=e(21010),L=e(60923),w=e(37959),N=e(57130),M=e(89652),W=e(93400),F=e(43037),D=e(85893),p=function(b){(0,P.Z)(b);var j=new W.f("pages.events",(0,U.YB)());return(0,D.jsx)(F.ZP,{logo:window.publicPath+"logo.svg",title:L.Z.title,layout:"top",navTheme:"dark",rightContentRender:function(){return(0,D.jsx)(w.Z,{})},children:(0,D.jsx)(N.Z,{parentIntl:j,request:M.Rp,logViewerProps:{request:M.FV}})})};O.default=p},57130:function(S,O,e){"use strict";e.d(O,{Z:function(){return fe}});var P=e(39428),R=e(3182),U=e(14965),L=e(68588),w=e(22385),N=e(45777),M=e(11849),W=e(38663),F=e(57529),D=e(22122),p=e(96156),$=e(79090),b=e(94184),j=e.n(b),m=e(67294),z=e(53124),ee=e(96159),te=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(u);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(u,t[s])&&(a[t[s]]=u[t[s]]);return a},ne=function(r){var a,t,s=r.prefixCls,C=r.className,v=r.color,o=v===void 0?"blue":v,n=r.dot,d=r.pending,c=d===void 0?!1:d,h=r.position,T=r.label,E=r.children,Z=te(r,["prefixCls","className","color","dot","pending","position","label","children"]),x=m.useContext(z.E_),Y=x.getPrefixCls,i=Y("timeline",s),B=j()((a={},(0,p.Z)(a,"".concat(i,"-item"),!0),(0,p.Z)(a,"".concat(i,"-item-pending"),c),a),C),K=j()((t={},(0,p.Z)(t,"".concat(i,"-item-head"),!0),(0,p.Z)(t,"".concat(i,"-item-head-custom"),!!n),(0,p.Z)(t,"".concat(i,"-item-head-").concat(o),!0),t)),y=/blue|red|green|gray/.test(o||"")?void 0:o;return m.createElement("li",(0,D.Z)({},Z,{className:B}),T&&m.createElement("div",{className:"".concat(i,"-item-label")},T),m.createElement("div",{className:"".concat(i,"-item-tail")}),m.createElement("div",{className:K,style:{borderColor:y,color:y}},n),m.createElement("div",{className:"".concat(i,"-item-content")},E))},G=ne,re=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(u);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(u,t[s])&&(a[t[s]]=u[t[s]]);return a},J=function(r){var a,t=m.useContext(z.E_),s=t.getPrefixCls,C=t.direction,v=r.prefixCls,o=r.pending,n=o===void 0?null:o,d=r.pendingDot,c=r.children,h=r.className,T=r.reverse,E=T===void 0?!1:T,Z=r.mode,x=Z===void 0?"":Z,Y=re(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),i=s("timeline",v),B=typeof n=="boolean"?null:n,K=n?m.createElement(G,{pending:!!n,dot:d||m.createElement($.Z,null)},B):null,y=m.Children.toArray(c);y.push(K),E&&y.reverse();var he=function(g,V){return x==="alternate"?g.props.position==="right"?"".concat(i,"-item-right"):g.props.position==="left"||V%2==0?"".concat(i,"-item-left"):"".concat(i,"-item-right"):x==="left"?"".concat(i,"-item-left"):x==="right"||g.props.position==="right"?"".concat(i,"-item-right"):""},X=y.filter(function(I){return!!I}),k=m.Children.count(X),_="".concat(i,"-item-last"),pe=m.Children.map(X,function(I,g){var V=g===k-2?_:"",Ee=g===k-1?_:"";return(0,ee.Tm)(I,{className:j()([I.props.className,!E&&!!n?V:Ee,he(I,g)])})}),q=y.some(function(I){var g;return!!((g=I==null?void 0:I.props)===null||g===void 0?void 0:g.label)}),ge=j()(i,(a={},(0,p.Z)(a,"".concat(i,"-pending"),!!n),(0,p.Z)(a,"".concat(i,"-reverse"),!!E),(0,p.Z)(a,"".concat(i,"-").concat(x),!!x&&!q),(0,p.Z)(a,"".concat(i,"-label"),q),(0,p.Z)(a,"".concat(i,"-rtl"),C==="rtl"),a),h);return m.createElement("ul",(0,D.Z)({},Y,{className:ge}),pe)};J.Item=G;var ae=J,H=ae,oe=e(2824),xe=e(402),se=e(97272),ie=e(96486),A=e.n(ie),le=e(30381),l=e.n(le),de=e(16894),ce=e(470),Q=e.n(ce),f=e(85893),ue=se.Z.Paragraph,me=function(r){var a=r.eventId,t=r.expanded,s=r.request,C=(0,m.useState)(),v=(0,oe.Z)(C,2),o=v[0],n=v[1];(0,m.useEffect)(function(){t&&s&&s({eventId:a}).then(function(c){c.data&&n(c.data)})},[t,a,s]);var d=function c(h){if(A().isString(h))try{return c(JSON.parse(h))}catch(x){return[h]}else{if(A().isArray(h))return h.map(function(x){return c(x)}).flat();if(A().isObject(h)){var T=[];for(var E in h)if(Object.prototype.hasOwnProperty.call(h,E)){var Z=h[E];T.push((0,f.jsxs)("div",{className:Q().logline,children:[(0,f.jsxs)("div",{className:"log-title",children:["[",E,"]"]}),(0,f.jsx)(ue,{className:"log-content",ellipsis:{expandable:!0},copyable:!0,children:Z})]},E))}return T}}return[h]};return(0,f.jsx)(H,{children:o==null?void 0:o.map(function(c){return(0,f.jsxs)(H.Item,{color:"green",children:[(0,f.jsx)("div",{children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")}),d(c.log),(0,f.jsx)("div",{className:Q().logtime,children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")})]},c.id)})})},ve=function(r){var a=r.parentIntl,t=r.logViewerProps,s=r.request,C=function(o,n,d,c){return(0,f.jsx)(me,(0,M.Z)((0,M.Z)({},t),{},{eventId:o.id,expanded:c}))};return(0,f.jsx)(de.ZP,{columns:[{title:"Event Time",hideInSearch:!0,dataIndex:"createTime",width:280,render:function(o,n){if(!(n!=null&&n.createTime))return"";var d=l()(n.createTime);return"".concat(d.format("YYYY-MM-DD hh:mm:ss")," (").concat(d.fromNow(),")")}},{title:"Username",dataIndex:"username",width:180,hideInSearch:!0,render:function(o,n){return n.username?n.userId?(0,f.jsx)(N.Z,{title:n.userId,children:n.username}):n.username:n.userId}},{title:"Client IP",dataIndex:"clientIp",width:180,hideInSearch:!0},{title:"Location",dataIndex:"location",width:180,hideInSearch:!0},{title:"Action",dataIndex:"action",hideInSearch:!0},{title:"Status",hideInSearch:!0,dataIndex:"status",valueEnum:{0:{text:"Failed",status:"Error"},1:{text:"Successd",status:"Success"},false:{text:"Failed",status:"Error"},true:{text:"Successd",status:"Success"}},render:function(o,n){return!n.status&&n.message?(console.log(n.message,o),(0,f.jsx)(N.Z,{title:n.message,children:(0,f.jsx)("span",{children:o})})):o}},{title:"Took",hideInSearch:!0,dataIndex:"took",render:function(o,n){if(!n.took)return"";var d=n.took/1e3/1e3;return d<10?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(2)}):d<1e3?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(0)}):d<10*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(2)}):d<120*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(0)}):l().duration(d).humanize()}},{title:"keywords",hideInTable:!0,dataIndex:"keywords",hideInSearch:!1},{title:"Time Range",hideInTable:!0,dataIndex:"timeRange",valueType:"dateTimeRange",hideInSearch:!1,search:{transform:function(o){return{startTime:l()(o[0]).format(),endTime:l()(o[1]).format()}}},initialValue:[l()().startOf("day"),l()().endOf("day")],formItemProps:{style:{width:500}},renderFormItem:function(){return(0,f.jsx)(L.Z.RangePicker,{showTime:!0,ranges:{Today:[l()().startOf("day"),l()().endOf("day")],"Last 1 days":[l()().add(-1,"d"),l()()],"Last 3 days":[l()().add(-3,"d"),l()()],"Last 7 days":[l()().add(-7,"d"),l()()],"Last 30 days":[l()().add(-30,"d"),l()()],"This week":[l()().startOf("week"),l()().endOf("week")],"This month":[l()().startOf("month"),l()().endOf("month")]}})}}],request:function(){var v=(0,R.Z)((0,P.Z)().mark(function o(n){return(0,P.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",s(n));case 1:case"end":return c.stop()}},o)}));return function(o){return v.apply(this,arguments)}}(),rowKey:"id",expandable:{expandedRowRender:C},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:[5,10,20,50,100]}})},fe=ve}}]);
