(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[859],{16894:function(L,S,e){"use strict";var R=e(4582);S.ZP=R.Z},470:function(L){L.exports={logline:"logline___DkIY_",logtime:"logtime___2qPKB"}},57529:function(){},76867:function(L,S,e){"use strict";e.r(S);var R=e(67294),A=e(21010),G=e(60923),K=e(37959),J=e(57130),N=e(89652),Y=e(93400),Q=e(72709),X=e(43037),D=e(85893),g=function(V){var C,u,M,b=V.history,U=new Y.f("pages.events",(0,A.YB)()),W=(0,A.tT)("@@initialState"),Z=W.initialState,O=(C=Z==null?void 0:Z.globalConfig)!==null&&C!==void 0?C:null;return(0,D.jsx)(X.ZP,{logo:(u=O==null?void 0:O.logo)!==null&&u!==void 0?u:(0,Q.Ak)("logo.svg"),title:(M=O==null?void 0:O.title)!==null&&M!==void 0?M:G.Z.title,onMenuHeaderClick:function(){b.push("/")},layout:"top",navTheme:"dark",rightContentRender:function(){return(0,D.jsx)(K.Z,{})},children:(0,D.jsx)(J.Z,{parentIntl:U,request:N.Rp,logViewerProps:{request:N.FV}})})};S.default=g},57130:function(L,S,e){"use strict";e.d(S,{Z:function(){return fe}});var R=e(39428),A=e(3182),G=e(14965),K=e(68588),J=e(22385),N=e(45777),Y=e(11849),Q=e(38663),X=e(57529),D=e(22122),g=e(96156),k=e(79090),V=e(94184),C=e.n(V),u=e(67294),M=e(53124),b=e(96159),U=function(m,r){var a={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&r.indexOf(t)<0&&(a[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(m);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(m,t[i])&&(a[t[i]]=m[t[i]]);return a},W=function(r){var a,t,i=r.prefixCls,T=r.className,v=r.color,o=v===void 0?"blue":v,n=r.dot,d=r.pending,c=d===void 0?!1:d,h=r.position,P=r.label,x=r.children,j=U(r,["prefixCls","className","color","dot","pending","position","label","children"]),E=u.useContext(M.E_),F=E.getPrefixCls,s=F("timeline",i),z=C()((a={},(0,g.Z)(a,"".concat(s,"-item"),!0),(0,g.Z)(a,"".concat(s,"-item-pending"),c),a),T),w=C()((t={},(0,g.Z)(t,"".concat(s,"-item-head"),!0),(0,g.Z)(t,"".concat(s,"-item-head-custom"),!!n),(0,g.Z)(t,"".concat(s,"-item-head-").concat(o),!0),t)),y=/blue|red|green|gray/.test(o||"")?void 0:o;return u.createElement("li",(0,D.Z)({},j,{className:z}),P&&u.createElement("div",{className:"".concat(s,"-item-label")},P),u.createElement("div",{className:"".concat(s,"-item-tail")}),u.createElement("div",{className:w,style:{borderColor:y,color:y}},n),u.createElement("div",{className:"".concat(s,"-item-content")},x))},Z=W,O=function(m,r){var a={};for(var t in m)Object.prototype.hasOwnProperty.call(m,t)&&r.indexOf(t)<0&&(a[t]=m[t]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(m);i<t.length;i++)r.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(m,t[i])&&(a[t[i]]=m[t[i]]);return a},B=function(r){var a,t=u.useContext(M.E_),i=t.getPrefixCls,T=t.direction,v=r.prefixCls,o=r.pending,n=o===void 0?null:o,d=r.pendingDot,c=r.children,h=r.className,P=r.reverse,x=P===void 0?!1:P,j=r.mode,E=j===void 0?"":j,F=O(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),s=i("timeline",v),z=typeof n=="boolean"?null:n,w=n?u.createElement(Z,{pending:!!n,dot:d||u.createElement(k.Z,null)},z):null,y=u.Children.toArray(c);y.push(w),x&&y.reverse();var he=function(p,H){return E==="alternate"?p.props.position==="right"?"".concat(s,"-item-right"):p.props.position==="left"||H%2==0?"".concat(s,"-item-left"):"".concat(s,"-item-right"):E==="left"?"".concat(s,"-item-left"):E==="right"||p.props.position==="right"?"".concat(s,"-item-right"):""},ee=y.filter(function(I){return!!I}),te=u.Children.count(ee),ne="".concat(s,"-item-last"),ge=u.Children.map(ee,function(I,p){var H=p===te-2?ne:"",xe=p===te-1?ne:"";return(0,b.Tm)(I,{className:C()([I.props.className,!x&&!!n?H:xe,he(I,p)])})}),re=y.some(function(I){var p;return!!((p=I==null?void 0:I.props)===null||p===void 0?void 0:p.label)}),pe=C()(s,(a={},(0,g.Z)(a,"".concat(s,"-pending"),!!n),(0,g.Z)(a,"".concat(s,"-reverse"),!!x),(0,g.Z)(a,"".concat(s,"-").concat(E),!!E&&!re),(0,g.Z)(a,"".concat(s,"-label"),re),(0,g.Z)(a,"".concat(s,"-rtl"),T==="rtl"),a),h);return u.createElement("ul",(0,D.Z)({},F,{className:pe}),ge)};B.Item=Z;var ae=B,q=ae,oe=e(2824),Ee=e(402),ie=e(97272),se=e(96486),$=e.n(se),le=e(30381),l=e.n(le),de=e(16894),ce=e(470),_=e.n(ce),f=e(85893),ue=ie.Z.Paragraph,me=function(r){var a=r.eventId,t=r.expanded,i=r.request,T=(0,u.useState)(),v=(0,oe.Z)(T,2),o=v[0],n=v[1];(0,u.useEffect)(function(){t&&i&&i({eventId:a}).then(function(c){c.data&&n(c.data)})},[t,a,i]);var d=function c(h){if($().isString(h))try{return c(JSON.parse(h))}catch(E){return[h]}else{if($().isArray(h))return h.map(function(E){return c(E)}).flat();if($().isObject(h)){var P=[];for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var j=h[x];P.push((0,f.jsxs)("div",{className:_().logline,children:[(0,f.jsxs)("div",{className:"log-title",children:["[",x,"]"]}),(0,f.jsx)(ue,{className:"log-content",ellipsis:{expandable:!0},copyable:!0,children:j})]},x))}return P}}return[h]};return(0,f.jsx)(q,{children:o==null?void 0:o.map(function(c){return(0,f.jsxs)(q.Item,{color:"green",children:[(0,f.jsx)("div",{children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")}),d(c.log),(0,f.jsx)("div",{className:_().logtime,children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")})]},c.id)})})},ve=function(r){var a=r.parentIntl,t=r.logViewerProps,i=r.request,T=function(o,n,d,c){return(0,f.jsx)(me,(0,Y.Z)((0,Y.Z)({},t),{},{eventId:o.id,expanded:c}))};return(0,f.jsx)(de.ZP,{columns:[{title:"Event Time",hideInSearch:!0,dataIndex:"createTime",width:280,render:function(o,n){if(!(n!=null&&n.createTime))return"";var d=l()(n.createTime);return"".concat(d.format("YYYY-MM-DD hh:mm:ss")," (").concat(d.fromNow(),")")}},{title:"Username",dataIndex:"username",width:180,hideInSearch:!0,render:function(o,n){return n.username?n.userId?(0,f.jsx)(N.Z,{title:n.userId,children:n.username}):n.username:n.userId}},{title:"Client IP",dataIndex:"clientIp",width:180,hideInSearch:!0},{title:"Location",dataIndex:"location",width:180,hideInSearch:!0},{title:"Action",dataIndex:"action",hideInSearch:!0},{title:"Status",hideInSearch:!0,dataIndex:"status",valueEnum:{0:{text:"Failed",status:"Error"},1:{text:"Successd",status:"Success"},false:{text:"Failed",status:"Error"},true:{text:"Successd",status:"Success"}},render:function(o,n){return!n.status&&n.message?(0,f.jsx)(N.Z,{title:n.message,children:(0,f.jsx)("span",{children:o})}):o}},{title:"Took",hideInSearch:!0,dataIndex:"took",render:function(o,n){if(!n.took)return"";var d=n.took/1e3/1e3;return d<10?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(2)}):d<1e3?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(0)}):d<10*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(2)}):d<120*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(0)}):l().duration(d).humanize()}},{title:"keywords",hideInTable:!0,dataIndex:"keywords",hideInSearch:!1},{title:"Time Range",hideInTable:!0,dataIndex:"timeRange",valueType:"dateTimeRange",hideInSearch:!1,search:{transform:function(o){return{startTime:l()(o[0]).format(),endTime:l()(o[1]).format()}}},initialValue:[l()().startOf("day"),l()().endOf("day")],formItemProps:{style:{width:500}},renderFormItem:function(){return(0,f.jsx)(K.Z.RangePicker,{showTime:!0,ranges:{Today:[l()().startOf("day"),l()().endOf("day")],"Last 1 days":[l()().add(-1,"d"),l()()],"Last 3 days":[l()().add(-3,"d"),l()()],"Last 7 days":[l()().add(-7,"d"),l()()],"Last 30 days":[l()().add(-30,"d"),l()()],"This week":[l()().startOf("week"),l()().endOf("week")],"This month":[l()().startOf("month"),l()().endOf("month")]}})}}],request:function(){var v=(0,A.Z)((0,R.Z)().mark(function o(n){return(0,R.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",i(n));case 1:case"end":return c.stop()}},o)}));return function(o){return v.apply(this,arguments)}}(),rowKey:"id",expandable:{expandedRowRender:T},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:[5,10,20,50,100]}})},fe=ve}}]);
