(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[416],{64317:function(tr,Se,n){"use strict";var k=n(28991),Ie=n(81253),Fe=n(22270),me=n(67294),_=n(66758),le=n(31649),Le=n(85893),oe=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],$e=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],ue=me.forwardRef(function(l,Re){var P=l.fieldProps,I=l.children,be=l.params,ce=l.proFieldProps,y=l.mode,de=l.valueEnum,L=l.request,fe=l.showSearch,pe=l.options,Pe=(0,Ie.Z)(l,oe),he=(0,me.useContext)(_.Z);return(0,Le.jsx)(le.Z,(0,k.Z)((0,k.Z)({valueEnum:(0,Fe.h)(de),request:L,params:be,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,k.Z)({options:pe,mode:y,showSearch:fe,getPopupContainer:he.getPopupContainer},P),ref:Re,proFieldProps:ce},Pe),{},{children:I}))}),Me=me.forwardRef(function(l,Re){var P=l.fieldProps,I=l.children,be=l.params,ce=l.proFieldProps,y=l.mode,de=l.valueEnum,L=l.request,fe=l.options,pe=(0,Ie.Z)(l,$e),Pe=(0,k.Z)({options:fe,mode:y||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},P),he=(0,me.useContext)(_.Z);return(0,Le.jsx)(le.Z,(0,k.Z)((0,k.Z)({valueEnum:(0,Fe.h)(de),request:L,params:be,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,k.Z)({getPopupContainer:he.getPopupContainer},Pe),ref:Re,proFieldProps:ce},pe),{},{children:I}))}),ve=ue,j=Me,D=ve;D.SearchSelect=j,D.displayName="ProFormComponent",Se.Z=D},85064:function(tr,Se,n){"use strict";n.d(Se,{Z:function(){return Ue}});var k=n(28991),Ie=n(28481),Fe=n(96156),me=n(81253),_=n(67294),le=n(94184),Le=n.n(le),oe=(0,_.createContext)({}),$e=oe,ue=n(90484),Me=n(86500),ve=n(1350),j=2,D=.16,l=.05,Re=.05,P=.15,I=5,be=4,ce=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function y(r){var i=r.r,m=r.g,u=r.b,x=(0,Me.py)(i,m,u);return{h:x.h*360,s:x.s,v:x.v}}function de(r){var i=r.r,m=r.g,u=r.b;return"#".concat((0,Me.vq)(i,m,u,!1))}function L(r,i,m){var u=m/100,x={r:(i.r-r.r)*u+r.r,g:(i.g-r.g)*u+r.g,b:(i.b-r.b)*u+r.b};return x}function fe(r,i,m){var u;return Math.round(r.h)>=60&&Math.round(r.h)<=240?u=m?Math.round(r.h)-j*i:Math.round(r.h)+j*i:u=m?Math.round(r.h)+j*i:Math.round(r.h)-j*i,u<0?u+=360:u>=360&&(u-=360),u}function pe(r,i,m){if(r.h===0&&r.s===0)return r.s;var u;return m?u=r.s-D*i:i===be?u=r.s+D:u=r.s+l*i,u>1&&(u=1),m&&i===I&&u>.1&&(u=.1),u<.06&&(u=.06),Number(u.toFixed(2))}function Pe(r,i,m){var u;return m?u=r.v+Re*i:u=r.v-P*i,u>1&&(u=1),Number(u.toFixed(2))}function he(r){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=[],u=(0,ve.uA)(r),x=I;x>0;x-=1){var ee=y(u),ie=de((0,ve.uA)({h:fe(ee,x,!0),s:pe(ee,x,!0),v:Pe(ee,x,!0)}));m.push(ie)}m.push(de(u));for(var re=1;re<=be;re+=1){var W=y(u),ge=de((0,ve.uA)({h:fe(W,re),s:pe(W,re),v:Pe(W,re)}));m.push(ge)}return i.theme==="dark"?ce.map(function(J){var ke=J.index,De=J.opacity,Ee=de(L((0,ve.uA)(i.backgroundColor||"#141414"),(0,ve.uA)(m[ke]),De*100));return Ee}):m}var je={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},M={},we={};Object.keys(je).forEach(function(r){M[r]=he(je[r]),M[r].primary=M[r][5],we[r]=he(je[r],{theme:"dark",backgroundColor:"#141414"}),we[r].primary=we[r][5]});var se=M.red,Sr=M.volcano,We=M.gold,br=M.orange,Pr=M.yellow,xr=M.lime,Ir=M.green,Be=M.cyan,jr=M.blue,Ae=M.geekblue,A=M.purple,Je=M.magenta,wr=M.grey,Tr=M.grey,He=n(80334),lr=n(44958);function sr(r,i){(0,He.ZP)(r,"[@ant-design/icons] ".concat(i))}function Ge(r){return(0,ue.Z)(r)==="object"&&typeof r.name=="string"&&typeof r.theme=="string"&&((0,ue.Z)(r.icon)==="object"||typeof r.icon=="function")}function Ye(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(r).reduce(function(i,m){var u=r[m];switch(m){case"class":i.className=u,delete i.class;break;default:i[m]=u}return i},{})}function Ve(r,i,m){return m?_.createElement(r.tag,(0,k.Z)((0,k.Z)({key:i},Ye(r.attrs)),m),(r.children||[]).map(function(u,x){return Ve(u,"".concat(i,"-").concat(r.tag,"-").concat(x))})):_.createElement(r.tag,(0,k.Z)({key:i},Ye(r.attrs)),(r.children||[]).map(function(u,x){return Ve(u,"".concat(i,"-").concat(r.tag,"-").concat(x))}))}function Qe(r){return he(r)[0]}function Xe(r){return r?Array.isArray(r)?r:[r]:[]}var Er={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},ir=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,or=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ir,m=(0,_.useContext)($e),u=m.csp,x=m.prefixCls,ee=i;x&&(ee=ee.replace(/anticon/g,x)),(0,_.useEffect)(function(){(0,lr.hq)(ee,"@ant-design-icons",{prepend:!0,csp:u})},[])},ur=["icon","className","onClick","style","primaryColor","secondaryColor"],Te={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function a(r){var i=r.primaryColor,m=r.secondaryColor;Te.primaryColor=i,Te.secondaryColor=m||Qe(i),Te.calculated=!!m}function cr(){return(0,k.Z)({},Te)}var Ne=function(i){var m=i.icon,u=i.className,x=i.onClick,ee=i.style,ie=i.primaryColor,re=i.secondaryColor,W=(0,me.Z)(i,ur),ge=Te;if(ie&&(ge={primaryColor:ie,secondaryColor:re||Qe(ie)}),or(),sr(Ge(m),"icon should be icon definiton, but got ".concat(m)),!Ge(m))return null;var J=m;return J&&typeof J.icon=="function"&&(J=(0,k.Z)((0,k.Z)({},J),{},{icon:J.icon(ge.primaryColor,ge.secondaryColor)})),Ve(J.icon,"svg-".concat(J.name),(0,k.Z)({className:u,onClick:x,style:ee,"data-icon":J.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},W))};Ne.displayName="IconReact",Ne.getTwoToneColors=cr,Ne.setTwoToneColors=a;var Ke=Ne;function qe(r){var i=Xe(r),m=(0,Ie.Z)(i,2),u=m[0],x=m[1];return Ke.setTwoToneColors({primaryColor:u,secondaryColor:x})}function dr(){var r=Ke.getTwoToneColors();return r.calculated?[r.primaryColor,r.secondaryColor]:r.primaryColor}var fr=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];qe("#1890ff");var Oe=_.forwardRef(function(r,i){var m,u=r.className,x=r.icon,ee=r.spin,ie=r.rotate,re=r.tabIndex,W=r.onClick,ge=r.twoToneColor,J=(0,me.Z)(r,fr),ke=_.useContext($e),De=ke.prefixCls,Ee=De===void 0?"anticon":De,mr=ke.rootClassName,vr=Le()(mr,Ee,(m={},(0,Fe.Z)(m,"".concat(Ee,"-").concat(x.name),!!x.name),(0,Fe.Z)(m,"".concat(Ee,"-spin"),!!ee||x.name==="loading"),m),u),ze=re;ze===void 0&&W&&(ze=-1);var pr=ie?{msTransform:"rotate(".concat(ie,"deg)"),transform:"rotate(".concat(ie,"deg)")}:void 0,hr=Xe(ge),_e=(0,Ie.Z)(hr,2),gr=_e[0],yr=_e[1];return _.createElement("span",(0,k.Z)((0,k.Z)({role:"img","aria-label":x.name},J),{},{ref:i,tabIndex:ze,onClick:W,className:vr}),_.createElement(Ke,{icon:x,primaryColor:gr,secondaryColor:yr,style:pr}))});Oe.displayName="AntdIcon",Oe.getTwoToneColor=dr,Oe.setTwoToneColor=qe;var Ue=Oe},16894:function(tr,Se,n){"use strict";var k=n(4582);Se.ZP=k.Z},41316:function(tr,Se,n){"use strict";n.r(Se),n.d(Se,{default:function(){return Ar}});var k=n(57338),Ie=n(273),Fe=n(18106),me=n(58500),_=n(54421),le=n(38272),Le=n(71194),oe=n(34883),$e=n(57663),ue=n(71577),Me=n(62350),ve=n(24565),j=n(11849),D=n(2824),l=n(39428),Re=n(34792),P=n(48086),I=n(3182),be=n(30381),ce=n.n(be),y=n(67294),de=n(21010),L=n(14300),fe=n(93224),pe=n(72709),Pe=["id"];function he(p,t){return je.apply(this,arguments)}function je(){return je=(0,I.Z)((0,l.Z)().mark(function p(t,c){return(0,l.Z)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,pe.WY)("/api/v1/sessions",(0,j.Z)({method:"GET",params:(0,j.Z)({},t)},c||{})));case 1:case"end":return d.stop()}},p)})),je.apply(this,arguments)}function M(p,t){return we.apply(this,arguments)}function we(){return we=(0,I.Z)((0,l.Z)().mark(function p(t,c){var f,d;return(0,l.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return f=t.id,d=(0,fe.Z)(t,Pe),v.abrupt("return",(0,pe.WY)("/api/v1/sessions/".concat(f),(0,j.Z)({method:"DELETE",params:(0,j.Z)({},d)},c||{})));case 2:case"end":return v.stop()}},p)})),we.apply(this,arguments)}var se=n(10861),Sr=n(88293),We=n(93400),br=n(55035),Pr=n(28508),xr=n(79508),Ir=n(51042),Be=n(57119),jr=n(81253),Ae=n(96156),A=n(28991),Je=n(28481),wr=n(95985),Tr=n(85064),He=function(t,c){return y.createElement(Tr.Z,(0,A.Z)((0,A.Z)({},t),{},{ref:c,icon:wr.Z}))};He.displayName="FilterOutlined";var lr=y.forwardRef(He),sr=n(17503),Ge=n(93035),Ye=n(92124),Ve=n(88182),Qe=n(94184),Xe=n.n(Qe),Er=n(97435),ir=n(42489),or=n(27350),ur=function(t){return(0,Ae.Z)({},t.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:t.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:8},"&-item":(0,Ae.Z)({whiteSpace:"nowrap"},"".concat(t.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:t.controlHeight,height:t.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":(0,Ae.Z)({},"".concat(t.componentCls,"-collapse-icon"),{backgroundColor:t.colorBgTextHover})})};function Te(p){return(0,or.Xj)("LightFilter",function(t){var c=(0,A.Z)((0,A.Z)({},t),{},{componentCls:".".concat(p)});return[ur(c)]})}var a=n(85893),cr=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],Ne=function(t){var c=t.items,f=t.prefixCls,d=t.size,e=d===void 0?"middle":d,v=t.collapse,H=t.collapseLabel,G=t.onValuesChange,h=t.bordered,V=t.values,ne=t.footerRender,Y=t.placement,B=(0,sr.YB)(),S="".concat(f,"-light-filter"),N=Te(S),Q=N.wrapSSR,R=N.hashId,E=(0,y.useState)(!1),w=(0,Je.Z)(E,2),K=w[0],xe=w[1],$=(0,y.useState)(function(){return(0,A.Z)({},V)}),X=(0,Je.Z)($,2),ae=X[0],ye=X[1];(0,y.useEffect)(function(){ye((0,A.Z)({},V))},[V]);var Ce=(0,y.useMemo)(function(){var O=[],q=[];return c.forEach(function(o){var U=o.props||{},te=U.secondary;te||v?O.push(o):q.push(o)}),{collapseItems:O,outsideItems:q}},[t.items]),Ze=Ce.collapseItems,Cr=Ce.outsideItems,er=function(){return H||(v?(0,a.jsx)(lr,{className:"".concat(S,"-collapse-icon ").concat(R)}):(0,a.jsx)(Ge.Q,{size:e,label:B.getMessage("form.lightFilter.more","\u66F4\u591A\u7B5B\u9009"),expanded:K}))};return Q((0,a.jsx)("div",{className:Xe()(S,R,"".concat(S,"-").concat(e),(0,Ae.Z)({},"".concat(S,"-effective"),Object.keys(V).some(function(O){return V[O]}))),children:(0,a.jsxs)("div",{className:"".concat(S,"-container ").concat(R),children:[Cr.map(function(O,q){var o=O.key,U=O.props.fieldProps,te=U!=null&&U.placement?U==null?void 0:U.placement:Y;return(0,a.jsx)("div",{className:"".concat(S,"-item ").concat(R),children:y.cloneElement(O,{fieldProps:(0,A.Z)((0,A.Z)({},O.props.fieldProps),{},{placement:te}),proFieldProps:{light:!0,label:O.props.label,bordered:h},bordered:h})},o||q)}),Ze.length?(0,a.jsx)("div",{className:"".concat(S,"-item ").concat(R),children:(0,a.jsx)(Ye.M,{padding:24,open:K,onOpenChange:function(q){xe(q)},placement:Y,label:er(),footerRender:ne,footer:{onConfirm:function(){G((0,A.Z)({},ae)),xe(!1)},onClear:function(){var q={};Ze.forEach(function(o){var U=o.props.name;q[U]=void 0}),G(q)}},children:Ze.map(function(O){var q=O.key,o=O.props,U=o.name,te=o.fieldProps,rr=(0,A.Z)((0,A.Z)({},te),{},{onChange:function(C){return ye((0,A.Z)((0,A.Z)({},ae),{},(0,Ae.Z)({},U,C!=null&&C.target?C.target.value:C))),!1}});ae.hasOwnProperty(U)&&(rr[O.props.valuePropName||"value"]=ae[U]);var nr=te!=null&&te.placement?te==null?void 0:te.placement:Y;return(0,a.jsx)("div",{className:"".concat(S,"-line ").concat(R),children:y.cloneElement(O,{fieldProps:(0,A.Z)((0,A.Z)({},rr),{},{placement:nr})})},q)})})},"more"):null]})}))};function Ke(p){var t=p.size,c=p.collapse,f=p.collapseLabel,d=p.initialValues,e=p.onValuesChange,v=p.form,H=p.placement,G=p.formRef,h=p.bordered,V=p.ignoreRules,ne=p.footerRender,Y=(0,jr.Z)(p,cr),B=(0,y.useContext)(Ve.ZP.ConfigContext),S=B.getPrefixCls,N=S("pro-form"),Q=(0,y.useState)(function(){return(0,A.Z)({},d)}),R=(0,Je.Z)(Q,2),E=R[0],w=R[1],K=(0,y.useRef)();return(0,y.useImperativeHandle)(G,function(){return K.current}),(0,a.jsx)(ir.I,(0,A.Z)((0,A.Z)({size:t,initialValues:d,form:v,contentRender:function($){return(0,a.jsx)(Ne,{prefixCls:N,items:$.flatMap(function(X){return(X==null?void 0:X.type.displayName)==="ProForm-Group"?X.props.children:X}),size:t,bordered:h,collapse:c,collapseLabel:f,placement:H,values:E||{},footerRender:ne,onValuesChange:function(ae){var ye,Ce,Ze=(0,A.Z)((0,A.Z)({},E),ae);w(Ze),(ye=K.current)===null||ye===void 0||ye.setFieldsValue(Ze),(Ce=K.current)===null||Ce===void 0||Ce.submit(),e&&e(ae,Ze)}})},formRef:K,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},(0,Er.Z)(Y,["labelWidth"])),{},{onValuesChange:function($,X){var ae;w(X),e==null||e($,X),(ae=K.current)===null||ae===void 0||ae.submit()}}))}var qe=n(64317),dr=n(55997),fr=n(43037),Oe=n(85224),Ue=n(16894),r=n(71153),i=n(60331),m=n(47673),u=n(28166),x=function(t){var c=t.visible,f=t.onCancel,d=t.user,e=t.parentIntl,v=new We.f("keypair.form",e),H=(0,y.useState)(!1),G=(0,D.Z)(H,2),h=G[0],V=G[1],ne=(0,y.useState)(),Y=(0,D.Z)(ne,2),B=Y[0],S=Y[1],N=(0,y.useState)(""),Q=(0,D.Z)(N,2),R=Q[0],E=Q[1];return(0,y.useEffect)(function(){c&&d&&(V(!1),S(void 0),E(""))},[d,c]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(oe.Z,{title:B?v.t("title.success","Success"):v.t("title","Add User Key"),open:c,onCancel:f,cancelButtonProps:{hidden:Boolean(B)},onOk:(0,I.Z)((0,l.Z)().mark(function w(){var K;return(0,l.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(!(d!=null&&d.id&&!h)){$.next=12;break}if(R){$.next=4;break}return P.default.error(v.t("name.empty","please input name!")),$.abrupt("return");case 4:return $.next=6,(0,se.bJ)({userId:d.id},{name:R,userId:d.id});case 6:if(K=$.sent,!K.success){$.next=11;break}return S(K.data),V(!0),$.abrupt("return");case 11:return $.abrupt("return");case 12:f();case 13:case"end":return $.stop()}},w)})),children:[(0,a.jsx)(u.Z,{hidden:h,value:R,onChange:function(K){E(K.target.value)},required:!h,placeholder:v.t("name.placeholder","Please Input name or description of user key")}),B&&(0,a.jsxs)("div",{children:[v.t("tips","User key pair, please keep it properly"),":",(0,a.jsxs)("ul",{style:{padding:"0px"},children:[(0,a.jsxs)("li",{children:["AccessKey: ",(0,a.jsx)(i.Z,{children:B.key})]}),(0,a.jsxs)("li",{children:["AccessSecret: ",(0,a.jsx)(i.Z,{children:B.secret})]}),(0,a.jsxs)("li",{children:["Private: ",(0,a.jsx)(i.Z,{children:B.private})]})]})]})]})})},ee=x,ie=n(2844),re=n(62448),W=n(5966),ge=["parentIntl"],J=function(t){var c=t.parentIntl,f=(0,fe.Z)(t,ge),d=new We.f("form",c),e=(0,y.useState)(0),v=(0,D.Z)(e,2),H=v[0],G=v[1],h=f.values,V=f.title,ne=f.modalVisible,Y=f.onSubmit,B=f.onCancel;return(0,y.useEffect)(function(){G(0)},[h]),(0,a.jsxs)(re.L,{stepsProps:{size:"small"},formProps:{preserve:!1},current:H,onCurrentChange:G,stepsFormRender:function(N,Q){return(0,a.jsx)(oe.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:V,open:ne,footer:Q,onCancel:function(){oe.Z.confirm({title:d.t("cancel?","Cancel editing?"),icon:(0,a.jsx)(Be.Z,{}),onOk:function(){B()},maskClosable:!0})},children:N})},onFinish:function(){var S=(0,I.Z)((0,l.Z)().mark(function N(Q){return(0,l.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Y((0,j.Z)((0,j.Z)({},Q),{},{status:h!=null&&h.status?h.status:L.J0.normal,isDelete:h!=null&&h.isDelete?h==null?void 0:h.isDelete:!1})));case 1:case"end":return E.stop()}},N)}));return function(N){return S.apply(this,arguments)}}(),children:[(0,a.jsxs)(re.L.StepForm,{initialValues:(0,j.Z)({},h),labelCol:{span:8},wrapperCol:{span:14},layout:"horizontal",title:d.t("title.basicConfig","Basic"),children:[(0,a.jsx)(ie.HZ,{label:d.t("avatar.label","Avatar"),name:"avatar"}),(0,a.jsx)(W.Z,{hidden:!0,name:"id"}),(0,a.jsx)(W.Z,{hidden:!0,name:"storage"}),(0,a.jsx)(W.Z,{name:"username",label:d.t("userName.label","Username"),width:"md",rules:[{required:!0,message:d.t("userName.required","Please input username!")},{pattern:/^[-_A-Za-z0-9]+$/,message:d.t("name.invalid","Username format error!")}]}),(0,a.jsx)(W.Z,{name:"fullName",label:d.t("fullName.label","FullName"),width:"md"}),(0,a.jsx)(W.Z,{name:"email",label:d.t("email.label","Email"),width:"md"}),(0,a.jsx)(W.Z,{name:"phoneNumber",label:d.t("phoneNumber.label","Telephone number"),width:"md"})]}),(0,a.jsx)(re.L.StepForm,{initialValues:{},title:d.t("app.title","App"),children:(0,a.jsx)(a.Fragment,{})})]})},ke=J,De=n(96486),Ee=["success","failed","onClick"],mr=function(t){var c=t.success,f=t.failed,d=t.onClick,e=(0,fe.Z)(t,Ee),v=(0,y.useState)(!1),H=(0,D.Z)(v,2),G=H[0],h=H[1],V=(0,y.useState)(0),ne=(0,D.Z)(V,2),Y=ne[0],B=ne[1];return(0,a.jsx)(ue.Z,(0,j.Z)((0,j.Z)({},e),{},{loading:G,onClick:function(){var S=(0,I.Z)((0,l.Z)().mark(function N(Q){var R;return(0,l.Z)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!d){w.next=16;break}return w.prev=1,h(!0),w.next=5,d(Q);case 5:R=w.sent,(0,De.isBoolean)(R)&&!R?B(2):B(1),w.next=13;break;case 9:w.prev=9,w.t0=w.catch(1),P.default.error("".concat(w.t0),3),B(2);case 13:return w.prev=13,h(!1),w.finish(13);case 16:case"end":return w.stop()}},N,null,[[1,9,13,16]])}));return function(N){return S.apply(this,arguments)}}(),children:Y===1&&c?c:Y===2&&f?f:e.children}))},vr=mr,ze=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f=P.default.loading("Adding ..."),e.prev=1,delete c.id,e.next=5,(0,se.r4)(c);case 5:return f(),P.default.success("Added successfully"),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),f(),P.default.error("Adding failed, please try again!"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},t,null,[[1,10]])}));return function(c){return p.apply(this,arguments)}}(),pr=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=P.default.loading("Configuring"),e.prev=1,!c.id){e.next=10;break}return e.next=5,(0,se.Nq)({id:c.id},c);case 5:return f(),P.default.success("update is successful"),e.abrupt("return",!0);case 10:return P.default.success("update failed, system error"),e.abrupt("return",!1);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(1),f(),P.default.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 19:case"end":return e.stop()}},t,null,[[1,14]])}));return function(c){return p.apply(this,arguments)}}(),hr=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=P.default.loading("enabling ..."),c){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,se.Q8)(c.map(function(v){return{id:v.id,status:L.J0.normal}}));case 6:return f(),P.default.success("Enabled successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),f(),P.default.error("Enabled failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[3,11]])}));return function(c){return p.apply(this,arguments)}}(),_e=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=P.default.loading("Disabling ..."),c){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,se.Q8)(c.map(function(v){return{id:v.id,status:L.J0.disabled}}));case 6:return f(),P.default.success("Disabled successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),f(),P.default.error("Disable failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[3,11]])}));return function(c){return p.apply(this,arguments)}}(),gr=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=P.default.loading("Deleting ..."),c){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,se.Vt)(c.map(function(v){return{id:v.id}}));case 6:return f(),P.default.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),f(),P.default.error("Delete failed, please try again: ".concat(e.t0)),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[3,11]])}));return function(c){return p.apply(this,arguments)}}(),yr=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c){var f;return(0,l.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",!0);case 2:return f=P.default.loading("Deleting ..."),e.prev=3,e.next=6,M({id:c});case 6:return f(),P.default.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),f(),P.default.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},t,null,[[3,11]])}));return function(c){return p.apply(this,arguments)}}(),Fr=function(){var p=(0,I.Z)((0,l.Z)().mark(function t(c,f){var d;return(0,l.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!c||!f)){v.next=2;break}return v.abrupt("return",!0);case 2:return d=P.default.loading("Deleting ..."),v.prev=3,v.next=6,(0,se.OK)({id:c,userId:f});case 6:return d(),P.default.success("Deleted successfully and will refresh soon"),v.abrupt("return",!0);case 11:return v.prev=11,v.t0=v.catch(3),d(),P.default.error("Delete failed, please try again"),v.abrupt("return",!1);case 16:case"end":return v.stop()}},t,null,[[3,11]])}));return function(c,f){return p.apply(this,arguments)}}(),Rr=function(){var t=(0,y.useState)(!1),c=(0,D.Z)(t,2),f=c[0],d=c[1],e=(0,y.useState)(!1),v=(0,D.Z)(e,2),H=v[0],G=v[1],h=(0,y.useRef)(),V=(0,y.useRef)(),ne=(0,y.useRef)(),Y=(0,y.useState)(),B=(0,D.Z)(Y,2),S=B[0],N=B[1],Q=(0,y.useState)([]),R=(0,D.Z)(Q,2),E=R[0],w=R[1],K=(0,y.useState)("all"),xe=(0,D.Z)(K,2),$=xe[0],X=xe[1],ae=(0,y.useState)(),ye=(0,D.Z)(ae,2),Ce=ye[0],Ze=ye[1],Cr=(0,y.useState)(!1),er=(0,D.Z)(Cr,2),O=er[0],q=er[1],o=new We.f("pages.users",(0,de.YB)()),U=function(){var C=(0,I.Z)((0,l.Z)().mark(function Z(s){var g;return(0,l.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return g=(0,j.Z)((0,j.Z)({},s),{},{status:$!=="all"?$:void 0}),Ce&&(g=(0,j.Z)({keywords:Ce},g)),F.abrupt("return",(0,se.Rf)(g));case 3:case"end":return F.stop()}},Z)}));return function(s){return C.apply(this,arguments)}}(),te=[{title:o.t("session.title.lastSeen","Last Seen"),dataIndex:"lastSeen",render:function(Z,s){return ce()(s.lastSeen).locale(o.locale).fromNow()}},{title:o.t("session.title.expiry","Expiry"),dataIndex:"expiry",render:function(Z,s){return ce()(s.expiry).locale(o.locale).fromNow()}},{title:o.t("session.title.loggedOn","Logged on"),dataIndex:"createTime",render:function(Z,s){return ce()(s.createTime).locale(o.locale).format("LLL")}},{render:function(Z,s){return[(0,a.jsx)("a",{onClick:(0,I.Z)((0,l.Z)().mark(function g(){var T;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,yr(s.id);case 2:if(!b.sent){b.next=4;break}(T=V.current)===null||T===void 0||T.reload();case 4:case"end":return b.stop()}},g)})),children:(0,a.jsx)(br.Z,{})},"delete")]}}],rr=[{title:o.t("keypair.title.name","Name"),dataIndex:"name",ellipsis:!0},{title:o.t("keypair.title.key","Key"),dataIndex:"key",ellipsis:!0},{title:o.t("keypair.title.createTime","Create Time"),dataIndex:"createTime",width:160,render:function(Z,s){return ce()(s.createTime).local().format("LLL")}},{width:40,render:function(Z,s){return[(0,a.jsx)(ve.Z,{title:o.t("keypair.delete.popconfirm","Are you sure you want to delete the key named {name}? After deletion, the service cannot be accessed using this key pair.",void 0,{name:s.name}),onConfirm:(0,I.Z)((0,l.Z)().mark(function g(){var T;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Fr(s.id,s.userId);case 2:if(!b.sent){b.next=4;break}(T=ne.current)===null||T===void 0||T.reload();case 4:case"end":return b.stop()}},g)})),children:(0,a.jsx)("a",{children:(0,a.jsx)(Pr.Z,{})})},"delete")]}}],nr=(0,Sr.GG)(L.J0,o,"status.value",{normal:"Success",disable:"Error",inactive:"Warning"}),Zr=[{title:o.t("updateForm.userName.nameLabel","User name"),hideInSearch:!0,dataIndex:"username",render:function(Z,s){return(0,a.jsx)("a",{onClick:function(){N(s),G(!0)},children:Z})}},{title:o.t("title.fullName","FullName"),dataIndex:"fullName",hideInSearch:!0},{title:o.t("title.phoneNumber","Telephone number"),dataIndex:"phoneNumber",hideInSearch:!0},{title:o.t("title.email","Email"),dataIndex:"email",hideInSearch:!0},{title:o.t("title.status","Status"),dataIndex:"status",hideInForm:!0,valueEnum:nr},{title:o.t("title.updatedTime","Last update time"),dataIndex:"updateTime",valueType:"dateTime",hideInTable:!0,hideInSearch:!0,hideInForm:!0},{title:o.t("title.loginTime","Last login time"),dataIndex:"loginTime",valueType:"dateTime",hideInSearch:!0,hideInForm:!0},{title:o.t("title.createTime","Create time"),dataIndex:"createTime",valueType:"dateTime",hideInSearch:!0,hideInTable:!0,hideInForm:!0},{title:o.t("title.option","Operating"),dataIndex:"option",valueType:"option",render:function(Z,s){var g=[(0,a.jsx)("a",{style:{flex:"unset"},onClick:function(){d(!0),N(s)},children:o.t("button.edit","Edit")},"config")];return s.status===L.J0.normal&&g.push((0,a.jsx)("a",{onClick:function(){q(!0),N(s)},style:{flex:"unset"},hidden:s.status!==L.J0.normal,children:o.t("button.addkey","Add key pair")},"addKey")),s.status===L.J0.user_inactive&&g.push((0,a.jsx)(vr,{type:"link",style:{flex:"unset"},success:(0,a.jsx)(xr.Z,{color:"green"}),onClick:(0,I.Z)((0,l.Z)().mark(function T(){var F;return(0,l.Z)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(s.email){z.next=2;break}throw new Error(o.t("activate.no-email"," The user has no email."));case 2:return z.next=4,(0,se.Pw)({userId:s.id});case 4:if(F=z.sent,!F.success){z.next=9;break}P.default.success(o.t("activate.succcess","Email sent successfully.")),z.next=10;break;case 9:throw new Error("Email sent failed.");case 10:case"end":return z.stop()}},T)})),hidden:s.status!==L.J0.user_inactive,children:o.t("button.activate","Activate")},"activate")),g}}];return(0,a.jsxs)(fr.Oc,{children:[(0,a.jsx)(Ue.ZP,{actionRef:h,rowKey:"id",search:!1,toolbar:{search:{onSearch:function(Z){if(Ze(Z),h.current){var s,g;(s=(g=h.current).setPageInfo)===null||s===void 0||s.call(g,(0,j.Z)((0,j.Z)({},h.current.pageInfo),{},{current:1})),h.current.reload()}}},filter:(0,a.jsx)(Ke,{onFinish:function(){var C=(0,I.Z)((0,l.Z)().mark(function Z(s){var g,T,F,b,z;return(0,l.Z)().wrap(function(ar){for(;;)switch(ar.prev=ar.next){case 0:return T=s.status,X((g=T.value)!==null&&g!==void 0?g:"all"),h.current&&((F=(b=h.current).setPageInfo)===null||F===void 0||F.call(b,(0,j.Z)((0,j.Z)({},h.current.pageInfo),{},{current:1})),(z=h.current)===null||z===void 0||z.reload()),ar.abrupt("return",!0);case 4:case"end":return ar.stop()}},Z)}));return function(Z){return C.apply(this,arguments)}}(),children:(0,a.jsx)(qe.Z,{name:"status",label:o.t("title.status","Status"),initialValue:{value:"all",label:o.t("status.all","All")},fieldProps:{labelInValue:!0},valueEnum:(0,j.Z)({all:o.t("status.all","All")},nr)})}),actions:[(0,a.jsxs)(ue.Z,{type:"primary",onClick:function(){d(!0)},children:[(0,a.jsx)(Ir.Z,{}),o.t("button.create","Create")]},"create")]},request:U,columns:Zr,rowSelection:{onChange:function(Z,s){w(s)}}}),(E==null?void 0:E.length)>0&&(0,a.jsxs)(Oe.Z,{extra:(0,a.jsxs)("div",{children:[o.t("chosen","Chosen")," ",(0,a.jsx)("a",{style:{fontWeight:600},children:E.length})," ",o.t("item","Item(s)")]}),children:[(0,a.jsx)(ue.Z,{danger:!0,onClick:function(){oe.Z.confirm({title:o.t("deleteConfirm","Are you sure you want to delete the following users?            "),icon:(0,a.jsx)(Be.Z,{}),onOk:function(){return(0,I.Z)((0,l.Z)().mark(function s(){var g,T;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,gr(E);case 2:w([]),(g=h.current)===null||g===void 0||(T=g.reloadAndRest)===null||T===void 0||T.call(g);case 4:case"end":return b.stop()}},s)}))()},content:(0,a.jsx)(le.ZP,{dataSource:E,rowKey:"id",renderItem:function(s){return(0,a.jsxs)(le.ZP.Item,{children:[s.username,s.fullName?"(".concat(s.fullName,")"):s.email?"(".concat(s.email,")"):""]})}})})},children:o.t("batchDeletion","Batch deletion")}),E.filter(function(C){return C.status!==L.J0.disabled}).length>0&&(0,a.jsx)(ue.Z,{onClick:function(){oe.Z.confirm({title:o.t("disableConfirm","Are you sure you want to disable the following users?"),icon:(0,a.jsx)(Be.Z,{}),onOk:function(){return(0,I.Z)((0,l.Z)().mark(function s(){var g,T;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,_e(E.filter(function(z){return z.status!==L.J0.disabled}));case 2:w([]),(g=h.current)===null||g===void 0||(T=g.reloadAndRest)===null||T===void 0||T.call(g);case 4:case"end":return b.stop()}},s)}))()},content:(0,a.jsx)(le.ZP,{dataSource:E.filter(function(Z){return Z.status!==L.J0.disabled}),rowKey:"id",renderItem:function(s){return(0,a.jsxs)(le.ZP.Item,{children:[s.username,s.fullName?"(".concat(s.fullName,")"):s.email?"(".concat(s.email,")"):""]})}})})},children:o.t("batchDisable","Batch disable")}),E.filter(function(C){return C.status!==L.J0.normal}).length>0&&(0,a.jsx)(ue.Z,{onClick:function(){oe.Z.confirm({title:o.t("enableConfirm","Are you sure you want to enable the following users?"),icon:(0,a.jsx)(Be.Z,{}),onOk:function(){return(0,I.Z)((0,l.Z)().mark(function s(){var g,T;return(0,l.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,hr(E.filter(function(z){return z.status!==L.J0.normal}));case 2:w([]),(g=h.current)===null||g===void 0||(T=g.reloadAndRest)===null||T===void 0||T.call(g);case 4:case"end":return b.stop()}},s)}))()},content:(0,a.jsx)(le.ZP,{dataSource:E.filter(function(Z){return Z.status!==L.J0.normal}),rowKey:"id",renderItem:function(s){return(0,a.jsxs)(le.ZP.Item,{children:[s.username,s.fullName?"(".concat(s.fullName,")"):s.email?"(".concat(s.email,")"):""]})}})})},children:o.t("batchEnable","Batch enable")})]}),(0,a.jsx)(ee,{visible:O,user:S,onCancel:function(){q(!1)},parentIntl:o}),(0,a.jsx)(ke,{title:o.t(S?"form.title.userUpdate":"form.title.userCreate",S?"Modify user":"Add user"),onSubmit:function(){var C=(0,I.Z)((0,l.Z)().mark(function Z(s){var g;return(0,l.Z)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(S?pr:ze)(s);case 2:return g=F.sent,g&&(d(!1),N(void 0),h.current&&h.current.reload()),F.abrupt("return",g);case 5:case"end":return F.stop()}},Z)}));return function(Z){return C.apply(this,arguments)}}(),onCancel:function(){d(!1),H||N(void 0)},modalVisible:f,values:S,parentIntl:o}),(0,a.jsx)(Ie.Z,{width:800,open:H,onClose:function(){N(void 0),G(!1)},closable:!1,children:H&&(S==null?void 0:S.username)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(dr.ZP,{column:2,title:o.t("detail.title","User Details"),request:(0,I.Z)((0,l.Z)().mark(function C(){return(0,l.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{data:S||{}});case 1:case"end":return s.stop()}},C)})),params:{id:S==null?void 0:S.id},columns:Zr}),(0,a.jsx)(me.Z,{items:[{label:o.t("detail.sessions.title","Sessions"),key:"sessions",children:(0,a.jsx)(Ue.ZP,{actionRef:V,toolBarRender:!1,request:function(Z){return he((0,j.Z)((0,j.Z)({},Z),{},{userId:S.id}))},columns:te,rowKey:"id",search:!1})},{label:o.t("detail.keypairs.title","Key Pairs"),key:"keypairs",children:(0,a.jsx)(Ue.ZP,{actionRef:ne,toolBarRender:!1,request:function(Z){return(0,se.V6)((0,j.Z)((0,j.Z)({},Z),{},{userId:S.id}))},columns:rr,rowKey:"id",search:!1})}]})]})})]})},Ar=Rr}}]);
