(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[859],{16894:function(j,T,e){"use strict";var S=e(4582);T.ZP=S.Z},470:function(j){j.exports={logline:"logline___DkIY_",logtime:"logtime___2qPKB"}},57529:function(){},76867:function(j,T,e){"use strict";e.r(T);var S=e(67294),L=e(21010),F=e(60923),A=e(37959),w=e(57130),Z=e(89652),M=e(93400),$=e(43037),N=e(85893),R=function(Y){var V=Y.history,y=new M.f("pages.events",(0,L.YB)());return(0,N.jsx)($.ZP,{logo:window.publicPath+"logo.svg",title:F.Z.title,onMenuHeaderClick:function(){V.push("/")},layout:"top",navTheme:"dark",rightContentRender:function(){return(0,N.jsx)(A.Z,{})},children:(0,N.jsx)(w.Z,{parentIntl:y,request:Z.Rp,logViewerProps:{request:Z.FV}})})};T.default=R},57130:function(j,T,e){"use strict";e.d(T,{Z:function(){return fe}});var S=e(39428),L=e(3182),F=e(14965),A=e(68588),w=e(22385),Z=e(45777),M=e(11849),$=e(38663),N=e(57529),R=e(22122),g=e(96156),Y=e(79090),V=e(94184),y=e.n(V),m=e(67294),z=e(53124),ee=e(96159),te=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(u);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(u,t[s])&&(a[t[s]]=u[t[s]]);return a},ne=function(r){var a,t,s=r.prefixCls,P=r.className,v=r.color,o=v===void 0?"blue":v,n=r.dot,d=r.pending,c=d===void 0?!1:d,h=r.position,O=r.label,x=r.children,D=te(r,["prefixCls","className","color","dot","pending","position","label","children"]),E=m.useContext(z.E_),K=E.getPrefixCls,i=K("timeline",s),U=y()((a={},(0,g.Z)(a,"".concat(i,"-item"),!0),(0,g.Z)(a,"".concat(i,"-item-pending"),c),a),P),W=y()((t={},(0,g.Z)(t,"".concat(i,"-item-head"),!0),(0,g.Z)(t,"".concat(i,"-item-head-custom"),!!n),(0,g.Z)(t,"".concat(i,"-item-head-").concat(o),!0),t)),C=/blue|red|green|gray/.test(o||"")?void 0:o;return m.createElement("li",(0,R.Z)({},D,{className:U}),O&&m.createElement("div",{className:"".concat(i,"-item-label")},O),m.createElement("div",{className:"".concat(i,"-item-tail")}),m.createElement("div",{className:W,style:{borderColor:C,color:C}},n),m.createElement("div",{className:"".concat(i,"-item-content")},x))},H=ne,re=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(u);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(u,t[s])&&(a[t[s]]=u[t[s]]);return a},G=function(r){var a,t=m.useContext(z.E_),s=t.getPrefixCls,P=t.direction,v=r.prefixCls,o=r.pending,n=o===void 0?null:o,d=r.pendingDot,c=r.children,h=r.className,O=r.reverse,x=O===void 0?!1:O,D=r.mode,E=D===void 0?"":D,K=re(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),i=s("timeline",v),U=typeof n=="boolean"?null:n,W=n?m.createElement(H,{pending:!!n,dot:d||m.createElement(Y.Z,null)},U):null,C=m.Children.toArray(c);C.push(W),x&&C.reverse();var he=function(p,b){return E==="alternate"?p.props.position==="right"?"".concat(i,"-item-right"):p.props.position==="left"||b%2==0?"".concat(i,"-item-left"):"".concat(i,"-item-right"):E==="left"?"".concat(i,"-item-left"):E==="right"||p.props.position==="right"?"".concat(i,"-item-right"):""},X=C.filter(function(I){return!!I}),k=m.Children.count(X),q="".concat(i,"-item-last"),ge=m.Children.map(X,function(I,p){var b=p===k-2?q:"",xe=p===k-1?q:"";return(0,ee.Tm)(I,{className:y()([I.props.className,!x&&!!n?b:xe,he(I,p)])})}),_=C.some(function(I){var p;return!!((p=I==null?void 0:I.props)===null||p===void 0?void 0:p.label)}),pe=y()(i,(a={},(0,g.Z)(a,"".concat(i,"-pending"),!!n),(0,g.Z)(a,"".concat(i,"-reverse"),!!x),(0,g.Z)(a,"".concat(i,"-").concat(E),!!E&&!_),(0,g.Z)(a,"".concat(i,"-label"),_),(0,g.Z)(a,"".concat(i,"-rtl"),P==="rtl"),a),h);return m.createElement("ul",(0,R.Z)({},K,{className:pe}),ge)};G.Item=H;var ae=G,J=ae,oe=e(2824),Ee=e(402),se=e(97272),ie=e(96486),B=e.n(ie),le=e(30381),l=e.n(le),de=e(16894),ce=e(470),Q=e.n(ce),f=e(85893),ue=se.Z.Paragraph,me=function(r){var a=r.eventId,t=r.expanded,s=r.request,P=(0,m.useState)(),v=(0,oe.Z)(P,2),o=v[0],n=v[1];(0,m.useEffect)(function(){t&&s&&s({eventId:a}).then(function(c){c.data&&n(c.data)})},[t,a,s]);var d=function c(h){if(B().isString(h))try{return c(JSON.parse(h))}catch(E){return[h]}else{if(B().isArray(h))return h.map(function(E){return c(E)}).flat();if(B().isObject(h)){var O=[];for(var x in h)if(Object.prototype.hasOwnProperty.call(h,x)){var D=h[x];O.push((0,f.jsxs)("div",{className:Q().logline,children:[(0,f.jsxs)("div",{className:"log-title",children:["[",x,"]"]}),(0,f.jsx)(ue,{className:"log-content",ellipsis:{expandable:!0},copyable:!0,children:D})]},x))}return O}}return[h]};return(0,f.jsx)(J,{children:o==null?void 0:o.map(function(c){return(0,f.jsxs)(J.Item,{color:"green",children:[(0,f.jsx)("div",{children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")}),d(c.log),(0,f.jsx)("div",{className:Q().logtime,children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")})]},c.id)})})},ve=function(r){var a=r.parentIntl,t=r.logViewerProps,s=r.request,P=function(o,n,d,c){return(0,f.jsx)(me,(0,M.Z)((0,M.Z)({},t),{},{eventId:o.id,expanded:c}))};return(0,f.jsx)(de.ZP,{columns:[{title:"Event Time",hideInSearch:!0,dataIndex:"createTime",width:280,render:function(o,n){if(!(n!=null&&n.createTime))return"";var d=l()(n.createTime);return"".concat(d.format("YYYY-MM-DD hh:mm:ss")," (").concat(d.fromNow(),")")}},{title:"Username",dataIndex:"username",width:180,hideInSearch:!0,render:function(o,n){return n.username?n.userId?(0,f.jsx)(Z.Z,{title:n.userId,children:n.username}):n.username:n.userId}},{title:"Client IP",dataIndex:"clientIp",width:180,hideInSearch:!0},{title:"Location",dataIndex:"location",width:180,hideInSearch:!0},{title:"Action",dataIndex:"action",hideInSearch:!0},{title:"Status",hideInSearch:!0,dataIndex:"status",valueEnum:{0:{text:"Failed",status:"Error"},1:{text:"Successd",status:"Success"},false:{text:"Failed",status:"Error"},true:{text:"Successd",status:"Success"}},render:function(o,n){return!n.status&&n.message?(console.log(n.message,o),(0,f.jsx)(Z.Z,{title:n.message,children:(0,f.jsx)("span",{children:o})})):o}},{title:"Took",hideInSearch:!0,dataIndex:"took",render:function(o,n){if(!n.took)return"";var d=n.took/1e3/1e3;return d<10?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(2)}):d<1e3?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(0)}):d<10*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(2)}):d<120*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(0)}):l().duration(d).humanize()}},{title:"keywords",hideInTable:!0,dataIndex:"keywords",hideInSearch:!1},{title:"Time Range",hideInTable:!0,dataIndex:"timeRange",valueType:"dateTimeRange",hideInSearch:!1,search:{transform:function(o){return{startTime:l()(o[0]).format(),endTime:l()(o[1]).format()}}},initialValue:[l()().startOf("day"),l()().endOf("day")],formItemProps:{style:{width:500}},renderFormItem:function(){return(0,f.jsx)(A.Z.RangePicker,{showTime:!0,ranges:{Today:[l()().startOf("day"),l()().endOf("day")],"Last 1 days":[l()().add(-1,"d"),l()()],"Last 3 days":[l()().add(-3,"d"),l()()],"Last 7 days":[l()().add(-7,"d"),l()()],"Last 30 days":[l()().add(-30,"d"),l()()],"This week":[l()().startOf("week"),l()().endOf("week")],"This month":[l()().startOf("month"),l()().endOf("month")]}})}}],request:function(){var v=(0,L.Z)((0,S.Z)().mark(function o(n){return(0,S.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",s(n));case 1:case"end":return c.stop()}},o)}));return function(o){return v.apply(this,arguments)}}(),rowKey:"id",expandable:{expandedRowRender:P},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:[5,10,20,50,100]}})},fe=ve}}]);
