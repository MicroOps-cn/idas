(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[326],{50317:function(ge){ge.exports={SearchInput:"SearchInput___PEFkt",ProxyUrlInput:"ProxyUrlInput___3liOo"}},12144:function(ge,$,t){"use strict";t.r($),t.d($,{default:function(){return je}});var A=t(18106),U=t(58500),de=t(49111),B=t(19650),ce=t(93224),w=t(58024),h=t(91894),T=t(11849),N=t(57663),n=t(71577),l=t(62350),s=t(24565),e=t(2824),r=t(39428),u=t(34792),d=t(48086),v=t(3182),z=t(30381),F=t.n(z),m=t(67294),re=t(21010),k=t(44728),G=t(14300),o=t(88293),De=t(93400),Ze=t(28508),Pe=t(55997),Ce=t(4582),W=t(71194),J=t(34883),_=t(71153),H=t(60331),Q=t(17462),pe=t(76772),Ee=t(47673),ne=t(28166),a=t(85893),g=function(R){var O=R.visible,b=R.onClose,Z=R.app,he=R.parentIntl,c=new De.f("keypair.form",he),ve=(0,m.useState)(!1),ie=(0,e.Z)(ve,2),q=ie[0],ee=ie[1],Se=(0,m.useState)(),oe=(0,e.Z)(Se,2),K=oe[0],te=oe[1],y=(0,m.useState)(""),ue=(0,e.Z)(y,2),i=ue[0],p=ue[1];return(0,m.useEffect)(function(){O&&Z&&(ee(!1),te(void 0),p(""))},[Z,O]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(J.Z,{title:K?c.t("title.success","Success"):c.t("title","Add App Key"),open:O,onCancel:b,cancelButtonProps:{hidden:Boolean(K)},onOk:(0,v.Z)((0,r.Z)().mark(function Y(){var L;return(0,r.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(Z!=null&&Z.id&&!q)){E.next=12;break}if(i){E.next=4;break}return d.default.error(c.t("name.empty","please input name!")),E.abrupt("return");case 4:return E.next=6,(0,k.Wo)({appId:Z.id},{name:i,appId:Z.id});case 6:if(L=E.sent,!L.success){E.next=11;break}return te(L.data),ee(!0),E.abrupt("return");case 11:return E.abrupt("return");case 12:b();case 13:case"end":return E.stop()}},Y)})),children:[(0,a.jsx)(ne.Z,{hidden:q,value:i,onChange:function(L){p(L.target.value)},required:!q,placeholder:c.t("name.placeholder","Please Input name or description of app key")}),K&&(0,a.jsxs)("div",{children:[(0,a.jsx)(pe.Z,{description:c.t("used.tips","If used for applications such as OAuth, please use Access Secret. If used for radius, please use Secret Hash."),type:"info",showIcon:!0}),c.t("tips","App key pair, please keep it properly."),":",(0,a.jsxs)("ul",{style:{padding:"0px"},children:[(0,a.jsxs)("li",{children:["Access Key: ",(0,a.jsx)(H.Z,{children:K.key})]}),(0,a.jsxs)("li",{children:["Access Secret: ",(0,a.jsx)(H.Z,{children:K.privateKey})]}),(0,a.jsxs)("li",{children:["Secret Hash: ",(0,a.jsx)(H.Z,{children:K.secret})]})]})]})]})})},se=g,ae=t(7717),I=["isDelete","createTime","updateTime"],le=function(){var fe=(0,v.Z)((0,r.Z)().mark(function R(O,b){var Z;return(0,r.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!O||!b)){c.next=2;break}return c.abrupt("return",!0);case 2:return Z=d.default.loading("Deleting ..."),c.prev=3,c.next=6,(0,k.Rk)({appId:b},{appId:b,id:O});case 6:return Z(),d.default.success("Deleted successfully and will refresh soon"),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(3),Z(),d.default.error("Delete failed, please try again"),c.abrupt("return",!1);case 16:case"end":return c.stop()}},R,null,[[3,11]])}));return function(O,b){return fe.apply(this,arguments)}}(),X=function(R){var O,b=R.match.params.aid,Z=R.history,he=(0,m.useState)("baisc"),c=(0,e.Z)(he,2),ve=c[0],ie=c[1],q=(0,m.useState)(),ee=(0,e.Z)(q,2),Se=ee[0],oe=ee[1],K=(0,m.useState)(),te=(0,e.Z)(K,2),y=te[0],ue=te[1],i=new De.f("pages.apps",(0,re.YB)()),p=(0,m.useRef)(),Y=(0,m.useRef)(),L=(0,m.useState)(!1),me=(0,e.Z)(L,2),E=me[0],ye=me[1],Te=(0,m.useState)([]),Le=(0,e.Z)(Te,2),P=Le[0],Me=Le[1],We=(0,m.useState)([]),be=(0,e.Z)(We,2),Ie=be[0],xe=be[1],Ye=(0,m.useState)(!1),Ae=(0,e.Z)(Ye,2),Ne=Ae[0],Re=Ae[1],Fe=(0,m.useState)(!1),Ke=(0,e.Z)(Fe,2),Ue=Ke[0],Oe=Ke[1],He=(0,m.useState)(!1),Be=(0,e.Z)(He,2),$e=Be[0],we=Be[1],ze=function(){return P.map(function(f){var S=f.id,C=f.name,x=f.isDefault,D=f.urls;return{id:S,name:C,isDefault:x,urls:D}})},ke=[{title:i.t("name.label","Name"),dataIndex:"name"},{title:i.t("description.label","Description"),dataIndex:"description",span:2,ellipsis:!0,contentStyle:{display:"contents"}},{title:i.t("displayName.label","Display Name"),dataIndex:"displayName"},{title:i.t("url.label","URL"),dataIndex:"url",span:2,copyable:!0,render:function(f,S){return(0,a.jsx)("a",{target:"_blank",href:S.url,rel:"noreferrer",children:f})},ellipsis:!0,contentStyle:{display:"contents"}},{title:i.t("grantType.label","Grant Type"),dataIndex:"grantType",valueEnum:(0,o.fs)(G.qJ,i,"grantType.value")},{title:i.t("title.grantMode","Grant Mode"),dataIndex:"grantMode",valueEnum:(0,o.fs)(G.FQ,i,"grantMode.value")}],Ge=function(){var M=(0,v.Z)((0,r.Z)().mark(function f(){var S,C;return(0,r.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,Re(!0),D.next=4,(0,k.BN)({id:b});case 4:return S=D.sent,S.data&&(C=S.data,ue(C),Me(C.roles?C.roles:[]),xe(C.users?C.users:[])),Y.current.reload(),Re(!1),D.abrupt("return",S);case 11:return D.prev=11,D.t0=D.catch(0),D.t0.handled||console.error("failed to get app info: ".concat(D.t0)),D.abrupt("return",{success:!1});case 15:case"end":return D.stop()}},f,null,[[0,11]])}));return function(){return M.apply(this,arguments)}}(),Ve=[{title:i.t("keypair.title.name","Name"),dataIndex:"name",ellipsis:!0},{title:i.t("keypair.title.key","Key"),dataIndex:"key",ellipsis:!0},{title:i.t("keypair.title.createTime","Create Time"),dataIndex:"createTime",width:200,render:function(f,S){return F()(S.createTime).locale(i.locale).format("LLL")}},{width:40,render:function(f,S){return[(0,a.jsx)(s.Z,{title:i.t("keypair.delete.popconfirm","Are you sure you want to delete the key named {name}? After deletion, the service cannot be accessed using this key pair.",void 0,{name:S.name}),onConfirm:(0,v.Z)((0,r.Z)().mark(function C(){var x;return(0,r.Z)().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,le(S.id,S.appId);case 2:if(!V.sent){V.next=4;break}(x=Y.current)===null||x===void 0||x.reload();case 4:case"end":return V.stop()}},C)})),children:(0,a.jsx)("a",{children:(0,a.jsx)(Ze.Z,{})})},"delete")]}}],Je=[{label:i.t("title.basic","Basic Info"),key:"basic",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Pe.ZP,{column:{xs:1,sm:2,md:3},actionRef:p,request:Ge,columns:ke}),(0,a.jsx)(h.Z,{bodyStyle:{padding:0},headStyle:{padding:0},title:(0,a.jsx)("b",{children:i.t("title.keys","Key-pairs")}),bordered:!1,extra:(0,a.jsx)(n.Z,{type:"primary",onClick:function(){we(!0)},children:i.t("button.create-key","Create Key-pair")}),children:(0,a.jsx)(Ce.Z,{actionRef:Y,toolBarRender:!1,request:function(f){return(0,k.qy)((0,T.Z)((0,T.Z)({},f),{},{appId:b}))},columns:Ve,rowKey:"id",search:!1})})]})},{label:i.t("users","User"),key:"users",children:(0,a.jsx)("div",{style:{height:"calc( 100vh - 300px )"},children:(0,a.jsx)(ae.DV,{users:Ie,roles:P,onChange:xe,loading:Ne,granting:E,parentIntl:i,type:"horizontal"})})},{label:i.t("proxy","Proxy"),key:"proxy",disabled:!((O=y==null?void 0:y.grantType)!==null&&O!==void 0?O:[]).includes(G.qJ.proxy),children:(0,a.jsx)("div",{style:{height:"calc( 100vh - 320px )"},children:"111"})}],Qe=function(){var M=(0,v.Z)((0,r.Z)().mark(function f(S){var C,x,D,V,_e;return(0,r.Z)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!y){j.next=19;break}return j.prev=1,Oe(!0),C=y.isDelete,x=y.createTime,D=y.updateTime,V=(0,ce.Z)(y,I),j.next=6,(0,k.KT)({id:b},(0,T.Z)((0,T.Z)({},V),{},{roles:ze()},S));case 6:return _e=j.sent,_e.errorMessage&&d.default.error("failed to update: ".concat(_e.errorMessage)),d.default.info("Successfully updated app information."),Oe(!1),j.abrupt("return",_e);case 13:j.prev=13,j.t0=j.catch(1),j.t0.handled||console.error("failed to get user list: ".concat(j.t0));case 16:return j.prev=16,Oe(!1),j.finish(16);case 19:return j.abrupt("return",{success:!1});case 20:case"end":return j.stop()}},f,null,[[1,13,16,19]])}));return function(S){return M.apply(this,arguments)}}();return(0,m.useEffect)(function(){var M=[(0,a.jsx)(n.Z,{hidden:!(y!=null&&y.id),type:"primary",onClick:function(){return Z.push("/apps/".concat(y==null?void 0:y.id,"/edit"))},children:"Edit"},"edit"),(0,a.jsx)(n.Z,{type:"primary",onClick:function(){return p.current.reload()},children:"Refresh"},"refresh")];ve==="users"&&(E?M=[(0,a.jsx)(n.Z,{type:"primary",onClick:(0,v.Z)((0,r.Z)().mark(function f(){return(0,r.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:Qe({users:Ie.map(function(x){return{id:x.id,roleId:x.roleId}})}).then(function(x){x.success&&(ye(!1),p.current.reload())});case 1:case"end":return C.stop()}},f)})),loading:Ue,children:"Save"},"save"),(0,a.jsx)(n.Z,{type:"link",onClick:function(){return ye(!1)},children:"Cancel"},"cancel")]:M.push((0,a.jsx)(n.Z,{type:"primary",onClick:function(){return ye(!0)},children:"Grant"}))),oe(M)},[ve,E,Ie,Ue]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{style:{height:"100%"},bodyStyle:{height:"100%"},children:(0,a.jsx)(U.Z,{items:Je,onChange:function(f){ie(f)},tabBarExtraContent:(0,a.jsx)(B.Z,{children:Se})})}),(0,a.jsx)(se,{visible:$e,app:y,onClose:function(){we(!1),Y.current.reload()},parentIntl:i})]})},je=X},7717:function(ge,$,t){"use strict";t.d($,{DV:function(){return Pe}});var A=t(48736),U=t(27049),de=t(71748),B=t(90860),ce=t(47673),w=t(28166),h=t(39428),T=t(86582),N=t(3182),n=t(2824),l=t(93224),s=t(43358),e=t(66074),r=t(11849),u=t(54421),d=t(38272),v=t(67294),z=t(58533),F=t(2844),m=t(10861),re=t(93400),k=t(50317),G=t.n(k),o=t(85893),De=["type","loading"],Ze=function(W){var J=W.users,_=W.onChange,H=W.roles,Q=W.loading,pe=W.granting,Ee=W.parentIntl,ne=new re.f("users",Ee);return(0,o.jsx)(d.ZP,{dataSource:J,size:"small",loading:Q,renderItem:function(g){var se,ae;return(0,o.jsxs)(d.ZP.Item,{actions:_&&pe?[(0,o.jsx)("a",{onClick:function(){_(J.filter(function(le){return le.id!=g.id}))},children:ne.t("userList.delete","Delete")},"grant")]:[],children:[(0,o.jsx)(d.ZP.Item.Meta,{avatar:(0,o.jsx)(F.ZP,{src:"".concat(g.avatar)}),title:g.fullName?g.fullName:g.username,description:g.email}),_&&pe&&H.length>0?(0,o.jsx)(e.Z,{onSelect:function(le){_(J.map(function(X){return X.id==g.id?(0,r.Z)((0,r.Z)({},X),{},{roleId:le}):X}))},defaultValue:g&&g.roleId?g.roleId:(se=H.find(function(I){return I.isDefault}))===null||se===void 0?void 0:se.id,options:H.map(function(I){return{key:I.id,value:I.id,label:I.name}})}):(0,o.jsx)("div",{children:g&&g.role?g.role:(ae=H.find(function(I){return I.isDefault}))===null||ae===void 0?void 0:ae.name})]},g.id)}})},Pe=function(W){var J=W.type,_=J===void 0?"vertical":J,H=W.loading,Q=(0,l.Z)(W,De),pe=Q.roles,Ee=Q.onChange,ne=Q.users,a=Q.granting,g=Q.parentIntl,se=new re.f("grant",g),ae=(0,v.useState)(!0),I=(0,n.Z)(ae,2),le=I[0],X=I[1],je=(0,v.useState)(0),fe=(0,n.Z)(je,2),R=fe[0],O=fe[1],b=(0,v.useState)(),Z=(0,n.Z)(b,2),he=Z[0],c=Z[1],ve=(0,v.useState)([]),ie=(0,n.Z)(ve,2),q=ie[0],ee=ie[1],Se=(0,v.useState)(!1),oe=(0,n.Z)(Se,2),K=oe[0],te=oe[1],y=function(){var i=(0,N.Z)((0,h.Z)().mark(function p(Y){var L,me,E,ye,Te;return(0,h.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,te(!0),P.next=4,(0,m.Rf)((0,r.Z)({current:R+1,pageSize:20,keywords:he},Y));case 4:L=P.sent,L&&L.data?(me=L.data,E=L.current,ye=L.pageSize,Te=L.total,ee(function(Me){return[].concat((0,T.Z)(Me),(0,T.Z)(me))}),O(E),Te<E*ye&&X(!1)):X(!1),P.next=11;break;case 8:P.prev=8,P.t0=P.catch(0),P.t0.handled||console.error("failed to get user list: ".concat(P.t0));case 11:return P.prev=11,te(!1),P.finish(11);case 14:case"end":return P.stop()}},p,null,[[0,8,11,14]])}));return function(Y){return i.apply(this,arguments)}}(),ue=function(p){ee([]),c(p),O(1),y({keywords:p,current:1})};return(0,v.useEffect)(function(){ue()},[]),(0,o.jsxs)("div",{style:{height:"100%",width:"100%"},children:[a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{height:_==="vertical"?"calc(100% / 2)":"100%",display:a?"block":"none",width:_==="vertical"?"100%":"calc((100% - 32px) / 2)",float:_==="horizontal"?"left":"unset"},children:[(0,o.jsx)(w.Z.Search,{className:G().SearchInput,onSearch:function(p){K||ue(p)},loading:K}),(0,o.jsx)("div",{id:"scrollableDiv",style:{height:"calc( 100% - 32px )",overflow:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,o.jsx)(z.Z,{dataLength:q.length,next:y,hasMore:le,loader:(0,o.jsx)(B.Z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:(0,o.jsx)(U.Z,{plain:!0,children:"End"}),scrollableTarget:"scrollableDiv",children:(0,o.jsx)(d.ZP,{dataSource:q.filter(function(i){return!ne.map(function(p){return p.id}).includes(i.id)}),size:"small",loading:K,renderItem:function(p){return(0,o.jsx)(d.ZP.Item,{actions:[(0,o.jsx)("a",{onClick:function(){Ee([].concat((0,T.Z)(ne),[(0,r.Z)((0,r.Z)({},p),{},{role:""})]))},children:se.t("userList.grant","Grant")},"grant")],children:(0,o.jsx)(d.ZP.Item.Meta,{avatar:(0,o.jsx)(F.ZP,{src:"".concat(p.avatar)}),title:p.fullName?p.fullName:p.username,description:p.email})},p.id)}})})})]}),(0,o.jsx)(U.Z,{type:_==="vertical"?"horizontal":"vertical",style:{height:_==="vertical"?"unset":"100%",margin:_==="vertical"?"10px 0":"0 10px",float:_==="horizontal"?"left":"unset",display:a?"":"none"}})]}),(0,o.jsx)("div",{id:"scrollableDiv",style:{height:_!=="vertical"||!a?"100%":"calc((100% - 42px) / 2)",width:_==="horizontal"&&a?"calc((100% - 32px) / 2)":"100%",overflow:"auto",padding:"0 16px",float:_==="horizontal"?"left":"unset",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,o.jsx)(Ze,{parentIntl:g,users:ne,granting:a,roles:pe,loading:H,onChange:Ee})})]})};$.ZP=Pe},34952:function(ge,$,t){"use strict";var A=t(22122),U=t(15105),de=t(67294),B=function(h,T){var N={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&T.indexOf(n)<0&&(N[n]=h[n]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(h);l<n.length;l++)T.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(h,n[l])&&(N[n[l]]=h[n[l]]);return N},ce={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},w=de.forwardRef(function(h,T){var N=function(v){var z=v.keyCode;z===U.Z.ENTER&&v.preventDefault()},n=function(v){var z=v.keyCode,F=h.onClick;z===U.Z.ENTER&&F&&F()},l=h.style,s=h.noStyle,e=h.disabled,r=B(h,["style","noStyle","disabled"]),u={};return s||(u=(0,A.Z)({},ce)),e&&(u.pointerEvents="none"),u=(0,A.Z)((0,A.Z)({},u),l),de.createElement("div",(0,A.Z)({role:"button",tabIndex:0,ref:T},r,{onKeyDown:N,onKeyUp:n,style:u}))});$.Z=w},58533:function(ge,$,t){"use strict";var A=t(67294);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var U=function(n,l){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,e){s.__proto__=e}||function(s,e){for(var r in e)e.hasOwnProperty(r)&&(s[r]=e[r])},U(n,l)};function de(n,l){U(n,l);function s(){this.constructor=n}n.prototype=l===null?Object.create(l):(s.prototype=l.prototype,new s)}var B=function(){return B=Object.assign||function(l){for(var s,e=1,r=arguments.length;e<r;e++){s=arguments[e];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(l[u]=s[u])}return l},B.apply(this,arguments)};function ce(n,l,s,e){var r,u=!1,d=0;function v(){r&&clearTimeout(r)}function z(){v(),u=!0}typeof l!="boolean"&&(e=s,s=l,l=void 0);function F(){var m=this,re=Date.now()-d,k=arguments;if(u)return;function G(){d=Date.now(),s.apply(m,k)}function o(){r=void 0}e&&!r&&G(),v(),e===void 0&&re>n?G():l!==!0&&(r=setTimeout(e?o:G,e===void 0?n-re:n))}return F.cancel=z,F}var w={Pixel:"Pixel",Percent:"Percent"},h={unit:w.Percent,value:.8};function T(n){return typeof n=="number"?{unit:w.Percent,value:n*100}:typeof n=="string"?n.match(/^(\d*(\.\d+)?)px$/)?{unit:w.Pixel,value:parseFloat(n)}:n.match(/^(\d*(\.\d+)?)%$/)?{unit:w.Percent,value:parseFloat(n)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),h):(console.warn("scrollThreshold should be string or number"),h)}var N=function(n){de(l,n);function l(s){var e=n.call(this,s)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(r){e.lastScrollTop||(e.dragging=!0,r instanceof MouseEvent?e.startY=r.pageY:r instanceof TouchEvent&&(e.startY=r.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(r){!e.dragging||(r instanceof MouseEvent?e.currentY=r.pageY:r instanceof TouchEvent&&(e.currentY=r.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(r){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(r)},0);var u=e.props.height||e._scrollableNode?r.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var d=e.props.inverse?e.isElementAtTop(u,e.props.scrollThreshold):e.isElementAtBottom(u,e.props.scrollThreshold);d&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=u.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:s.dataLength},e.throttledOnScrollListener=ce(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return l.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},l.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},l.prototype.componentDidUpdate=function(s){this.props.dataLength!==s.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},l.getDerivedStateFromProps=function(s,e){var r=s.dataLength!==e.prevDataLength;return r?B(B({},e),{prevDataLength:s.dataLength}):null},l.prototype.isElementAtTop=function(s,e){e===void 0&&(e=.8);var r=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,u=T(e);return u.unit===w.Pixel?s.scrollTop<=u.value+r-s.scrollHeight+1:s.scrollTop<=u.value/100+r-s.scrollHeight+1},l.prototype.isElementAtBottom=function(s,e){e===void 0&&(e=.8);var r=s===document.body||s===document.documentElement?window.screen.availHeight:s.clientHeight,u=T(e);return u.unit===w.Pixel?s.scrollTop+r>=s.scrollHeight-u.value:s.scrollTop+r>=u.value/100*s.scrollHeight},l.prototype.render=function(){var s=this,e=B({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),r=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),u=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return A.createElement("div",{style:u,className:"infinite-scroll-component__outerdiv"},A.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(d){return s._infScroll=d},style:e},this.props.pullDownToRefresh&&A.createElement("div",{style:{position:"relative"},ref:function(d){return s._pullDown=d}},A.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!r&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},l}(A.Component);$.Z=N}}]);
