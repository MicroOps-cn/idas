(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[65],{16894:function(R,Z,e){"use strict";var C=e(4582);Z.ZP=C.Z},19273:function(R,Z,e){"use strict";e.d(Z,{Z:function(){return C}});function C($){if($==null)throw new TypeError("Cannot destructure undefined")}},470:function(R){R.exports={logline:"logline___DkIY_",logtime:"logtime___2qPKB"}},57529:function(){},57130:function(R,Z,e){"use strict";e.d(Z,{Z:function(){return fe}});var C=e(39428),$=e(3182),X=e(14965),Y=e(68588),w=e(22385),b=e(45777),V=e(11849),k=e(38663),F=e(57529),M=e(22122),f=e(96156),A=e(79090),G=e(94184),D=e.n(G),m=e(67294),z=e(53124),B=e(96159),O=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(u);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(u,t[o])&&(a[t[o]]=u[t[o]]);return a},T=function(r){var a,t,o=r.prefixCls,S=r.className,v=r.color,s=v===void 0?"blue":v,n=r.dot,d=r.pending,c=d===void 0?!1:d,p=r.position,j=r.label,y=r.children,L=O(r,["prefixCls","className","color","dot","pending","position","label","children"]),I=m.useContext(z.E_),U=I.getPrefixCls,i=U("timeline",o),J=D()((a={},(0,f.Z)(a,"".concat(i,"-item"),!0),(0,f.Z)(a,"".concat(i,"-item-pending"),c),a),S),H=D()((t={},(0,f.Z)(t,"".concat(i,"-item-head"),!0),(0,f.Z)(t,"".concat(i,"-item-head-custom"),!!n),(0,f.Z)(t,"".concat(i,"-item-head-").concat(s),!0),t)),N=/blue|red|green|gray/.test(s||"")?void 0:s;return m.createElement("li",(0,M.Z)({},L,{className:J}),j&&m.createElement("div",{className:"".concat(i,"-item-label")},j),m.createElement("div",{className:"".concat(i,"-item-tail")}),m.createElement("div",{className:H,style:{borderColor:N,color:N}},n),m.createElement("div",{className:"".concat(i,"-item-content")},y))},P=T,K=function(u,r){var a={};for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&r.indexOf(t)<0&&(a[t]=u[t]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(u);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(u,t[o])&&(a[t[o]]=u[t[o]]);return a},g=function(r){var a,t=m.useContext(z.E_),o=t.getPrefixCls,S=t.direction,v=r.prefixCls,s=r.pending,n=s===void 0?null:s,d=r.pendingDot,c=r.children,p=r.className,j=r.reverse,y=j===void 0?!1:j,L=r.mode,I=L===void 0?"":L,U=K(r,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),i=o("timeline",v),J=typeof n=="boolean"?null:n,H=n?m.createElement(P,{pending:!!n,dot:d||m.createElement(A.Z,null)},J):null,N=m.Children.toArray(c);N.push(H),y&&N.reverse();var he=function(x,Q){return I==="alternate"?x.props.position==="right"?"".concat(i,"-item-right"):x.props.position==="left"||Q%2==0?"".concat(i,"-item-left"):"".concat(i,"-item-right"):I==="left"?"".concat(i,"-item-left"):I==="right"||x.props.position==="right"?"".concat(i,"-item-right"):""},ee=N.filter(function(E){return!!E}),te=m.Children.count(ee),ne="".concat(i,"-item-last"),pe=m.Children.map(ee,function(E,x){var Q=x===te-2?ne:"",xe=x===te-1?ne:"";return(0,B.Tm)(E,{className:D()([E.props.className,!y&&!!n?Q:xe,he(E,x)])})}),re=N.some(function(E){var x;return!!((x=E==null?void 0:E.props)===null||x===void 0?void 0:x.label)}),ge=D()(i,(a={},(0,f.Z)(a,"".concat(i,"-pending"),!!n),(0,f.Z)(a,"".concat(i,"-reverse"),!!y),(0,f.Z)(a,"".concat(i,"-").concat(I),!!I&&!re),(0,f.Z)(a,"".concat(i,"-label"),re),(0,f.Z)(a,"".concat(i,"-rtl"),S==="rtl"),a),p);return m.createElement("ul",(0,M.Z)({},U,{className:ge}),pe)};g.Item=P;var ae=g,q=ae,se=e(2824),ye=e(402),oe=e(97272),ie=e(96486),W=e.n(ie),le=e(30381),l=e.n(le),de=e(16894),ce=e(470),_=e.n(ce),h=e(85893),ue=oe.Z.Paragraph,me=function(r){var a=r.eventId,t=r.expanded,o=r.request,S=(0,m.useState)(),v=(0,se.Z)(S,2),s=v[0],n=v[1];(0,m.useEffect)(function(){t&&o&&o({eventId:a}).then(function(c){c.data&&n(c.data)})},[t,a,o]);var d=function c(p){if(W().isString(p))try{return c(JSON.parse(p))}catch(I){return[p]}else{if(W().isArray(p))return p.map(function(I){return c(I)}).flat();if(W().isObject(p)){var j=[];for(var y in p)if(Object.prototype.hasOwnProperty.call(p,y)){var L=p[y];j.push((0,h.jsxs)("div",{className:_().logline,children:[(0,h.jsxs)("div",{className:"log-title",children:["[",y,"]"]}),(0,h.jsx)(ue,{className:"log-content",ellipsis:{expandable:!0},copyable:!0,children:L})]},y))}return j}}return[p]};return(0,h.jsx)(q,{children:s==null?void 0:s.map(function(c){return(0,h.jsxs)(q.Item,{color:"green",children:[(0,h.jsx)("div",{children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")}),d(c.log),(0,h.jsx)("div",{className:_().logtime,children:l()(c.createTime).format("YYYY-MM-DD hh:mm:ss")})]},c.id)})})},ve=function(r){var a=r.parentIntl,t=r.logViewerProps,o=r.request,S=function(s,n,d,c){return(0,h.jsx)(me,(0,V.Z)((0,V.Z)({},t),{},{eventId:s.id,expanded:c}))};return(0,h.jsx)(de.ZP,{columns:[{title:"Event Time",hideInSearch:!0,dataIndex:"createTime",width:280,render:function(s,n){if(!(n!=null&&n.createTime))return"";var d=l()(n.createTime);return"".concat(d.format("YYYY-MM-DD hh:mm:ss")," (").concat(d.fromNow(),")")}},{title:"Username",dataIndex:"username",width:180,hideInSearch:!0,render:function(s,n){return n.username?n.userId?(0,h.jsx)(b.Z,{title:n.userId,children:n.username}):n.username:n.userId}},{title:"Client IP",dataIndex:"clientIp",width:180,hideInSearch:!0},{title:"Location",dataIndex:"location",width:180,hideInSearch:!0},{title:"Action",dataIndex:"action",hideInSearch:!0},{title:"Status",hideInSearch:!0,dataIndex:"status",valueEnum:{0:{text:"Failed",status:"Error"},1:{text:"Successd",status:"Success"},false:{text:"Failed",status:"Error"},true:{text:"Successd",status:"Success"}},render:function(s,n){return!n.status&&n.message?(console.log(n.message,s),(0,h.jsx)(b.Z,{title:n.message,children:(0,h.jsx)("span",{children:s})})):s}},{title:"Took",hideInSearch:!0,dataIndex:"took",render:function(s,n){if(!n.took)return"";var d=n.took/1e3/1e3;return d<10?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(2)}):d<1e3?a.t("took.millisecond","{took} milliseconds","",{took:d.toFixed(0)}):d<10*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(2)}):d<120*1e3?a.t("took.second","{took} seconds","",{took:(d/1e3).toFixed(0)}):l().duration(d).humanize()}},{title:"keywords",hideInTable:!0,dataIndex:"keywords",hideInSearch:!1},{title:"Time Range",hideInTable:!0,dataIndex:"timeRange",valueType:"dateTimeRange",hideInSearch:!1,search:{transform:function(s){return{startTime:l()(s[0]).format(),endTime:l()(s[1]).format()}}},initialValue:[l()().startOf("day"),l()().endOf("day")],formItemProps:{style:{width:500}},renderFormItem:function(){return(0,h.jsx)(Y.Z.RangePicker,{showTime:!0,ranges:{Today:[l()().startOf("day"),l()().endOf("day")],"Last 1 days":[l()().add(-1,"d"),l()()],"Last 3 days":[l()().add(-3,"d"),l()()],"Last 7 days":[l()().add(-7,"d"),l()()],"Last 30 days":[l()().add(-30,"d"),l()()],"This week":[l()().startOf("week"),l()().endOf("week")],"This month":[l()().startOf("month"),l()().endOf("month")]}})}}],request:function(){var v=(0,$.Z)((0,C.Z)().mark(function s(n){return(0,C.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",o(n));case 1:case"end":return c.stop()}},s)}));return function(s){return v.apply(this,arguments)}}(),rowKey:"id",expandable:{expandedRowRender:S},pagination:{pageSize:10,showSizeChanger:!0,pageSizeOptions:[5,10,20,50,100]}})},fe=ve},51959:function(R,Z,e){"use strict";e.r(Z),e.d(Z,{default:function(){return B}});var C=e(19273),$=e(67294),X=e(21010),Y=e(39428),w=e(11849),b=e(3182),V=e(72709);function k(O,T){return F.apply(this,arguments)}function F(){return F=(0,b.Z)((0,Y.Z)().mark(function O(T,P){return(0,Y.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,V.WY)("/api/v1/events",(0,w.Z)({method:"GET",params:(0,w.Z)({},T)},P||{})));case 1:case"end":return g.stop()}},O)})),F.apply(this,arguments)}function M(O,T){return f.apply(this,arguments)}function f(){return f=(0,b.Z)((0,Y.Z)().mark(function O(T,P){return(0,Y.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,V.WY)("/api/v1/events/logs",(0,w.Z)({method:"GET",params:(0,w.Z)({},T)},P||{})));case 1:case"end":return g.stop()}},O)})),f.apply(this,arguments)}var A=e(93400),G=e(75362),D=e(57130),m=e(85893),z=function(T){(0,C.Z)(T);var P=new A.f("pages.events",(0,X.YB)());return(0,m.jsx)(G.ZP,{children:(0,m.jsx)(D.Z,{parentIntl:P,request:k,logViewerProps:{request:M}})})},B=z}}]);
