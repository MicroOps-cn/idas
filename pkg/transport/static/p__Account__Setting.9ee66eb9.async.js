(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[263],{16894:function(z,J,n){"use strict";var w=n(4582);J.ZP=w.Z},19273:function(z,J,n){"use strict";n.d(J,{Z:function(){return w}});function w(B){if(B==null)throw new TypeError("Cannot destructure undefined")}},80321:function(z){z.exports={baseView:"baseView___oUjxy",left:"left___QdCoD",right:"right___2m6ha",avatar_title:"avatar_title___pMeZU",avatar:"avatar___2h6EO",button_view:"button_view___3YYEA"}},79738:function(z){z.exports={main:"main___1HS-r",leftMenu:"leftMenu___3vGFj",right:"right___R4J4v",title:"title___26J81"}},7870:function(z,J,n){"use strict";n.r(J),n.d(J,{default:function(){return vr}});var w=n(11849),B=n(2824),jr=n(30887),ce=n(43084),wr=n(34442),h=n(67294),ne=n(21010),je=n(60923),we=n(37959),E=n(89652),W=n(93400),Ce=n(72709),$e=n(43037),te=n(21349),Cr=n(71194),se=n(34883),$r=n(57663),ve=n(71577),Sr=n(9715),H=n(63202),Ur=n(47673),_=n(28166),fe=n(69610),pe=n(54941),me=n(81306),he=n(6298),x=n(39428),br=n(34792),V=n(48086),O=n(3182),Se=n(2844),Ue=n(80321),ae=n.n(Ue),e=n(85893),be=function(){var f=(0,O.Z)((0,x.Z)().mark(function v(l){var u,r,i,o,d,a,t;return(0,x.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=l.id,r=l.username,i=l.avatar,o=l.fullName,d=l.phoneNumber,a=l.email,t=V.default.loading("Updating ..."),s.prev=2,s.next=5,(0,E.SF)({id:u,username:r,avatar:i,fullName:o,phoneNumber:d,email:a});case 5:return t(),V.default.success("Updated successfully"),s.abrupt("return",!0);case 10:return s.prev=10,s.t0=s.catch(2),t(),V.default.error("Update failed, please try again!"),s.abrupt("return",!1);case 15:case"end":return s.stop()}},v,null,[[2,10]])}));return function(l){return f.apply(this,arguments)}}(),Fe=function(f){(0,me.Z)(l,f);var v=(0,he.Z)(l);function l(){var u;(0,fe.Z)(this,l);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return u=v.call.apply(v,[this].concat(i)),u.view=void 0,u.getViewDom=function(d){u.view=d},u.handleFinish=function(){var d=(0,O.Z)((0,x.Z)().mark(function a(t){var p,s,C;return(0,x.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return p=u.props,s=p.currentUser,C=p.reload,c.next=3,be((0,w.Z)((0,w.Z)({},s),t));case 3:C();case 4:case"end":return c.stop()}},a)}));return function(a){return d.apply(this,arguments)}}(),u}return(0,pe.Z)(l,[{key:"render",value:function(){var r=this.props.currentUser;return(0,e.jsx)("div",{className:ae().baseView,ref:this.getViewDom,children:(0,e.jsxs)(H.Z,{layout:"vertical",onFinish:this.handleFinish,initialValues:r,requiredMark:!0,style:{display:"flex"},children:[(0,e.jsxs)("div",{className:ae().left,children:[(0,e.jsx)(H.Z.Item,{name:"username",label:this.props.parentIntl.t("basic.username","Username"),children:(0,e.jsx)(_.Z,{disabled:!0})}),(0,e.jsx)(H.Z.Item,{name:"email",label:this.props.parentIntl.t("basic.email"),rules:[{required:!0,message:this.props.parentIntl.t("basic.email-message")}],children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(H.Z.Item,{name:"fullName",label:this.props.parentIntl.t("basic.fullname"),children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(H.Z.Item,{name:"phoneNumber",label:this.props.parentIntl.t("basic.phone"),children:(0,e.jsx)(_.Z,{})}),(0,e.jsx)(H.Z.Item,{children:(0,e.jsx)(ve.Z,{htmlType:"submit",type:"primary",children:this.props.parentIntl.t("basic.update","Update Information")})})]}),(0,e.jsxs)("div",{className:ae().right,children:[(0,e.jsx)(H.Z.Item,{name:"avatar",label:this.props.parentIntl.t("basic.avatar","Avatar"),children:(0,e.jsx)(Se.G2,{})}),(0,e.jsx)(se.Z,{open:!1})]})]})})}}]),l}(h.Component),Me=Fe,Ie=n(19273),Pe=function(v){return(0,Ie.Z)(v),(0,e.jsx)(e.Fragment,{})},Te=Pe,Fr=n(54421),ie=n(38272),Ae=n(73727),Re=n(45953),Mr=n(77576),De=n(12028),ge=n(93224),Ne=["request","checked","onChange"],Ve=function(v){var l=v.request,u=v.checked,r=v.onChange,i=(0,ge.Z)(v,Ne),o=(0,h.useState)(!1),d=(0,B.Z)(o,2),a=d[0],t=d[1],p=(0,h.useState)(u),s=(0,B.Z)(p,2),C=s[0],y=s[1];return(0,h.useEffect)(function(){y(u)},[u]),(0,e.jsx)(De.Z,(0,w.Z)({onChange:function(){var c=(0,O.Z)((0,x.Z)().mark(function P(g,F){return(0,x.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,r==null||r(g,F),t(!0),m.next=5,l();case 5:y(g),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(0),y(!g);case 11:return m.prev=11,t(!1),m.finish(11);case 14:case"end":return m.stop()}},P,null,[[0,8,11,14]])}));return function(P,g){return c.apply(this,arguments)}}(),loading:a,checked:C},i))},Ze=Ve,Oe=n(57119),Q=n(55507),le=n(92137),Y=n(28991),oe=n(28481),Be=n(81253),Ee=n(73177),Le=n(88182),ke=n(72378),He=n.n(ke),Ge=n(21770),Ke=n(80334),We=n(73935),Ye=n(42489),ze=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function ye(f){var v,l,u,r,i=f.children,o=f.trigger,d=f.onVisibleChange,a=f.onOpenChange,t=f.modalProps,p=f.onFinish,s=f.submitTimeout,C=f.title,y=f.width,c=f.visible,P=f.open,g=(0,Be.Z)(f,ze);(0,Ke.ET)(!g.footer||!(t!=null&&t.footer),"ModalForm \u662F\u4E00\u4E2A ProForm \u7684\u7279\u6B8A\u5E03\u5C40\uFF0C\u5982\u679C\u60F3\u81EA\u5B9A\u4E49\u6309\u94AE\uFF0C\u8BF7\u4F7F\u7528 submit.render \u81EA\u5B9A\u4E49\u3002");var F=(0,h.useContext)(Le.ZP.ConfigContext),T=(0,h.useState)([]),m=(0,oe.Z)(T,2),A=m[1],U=(0,h.useState)(!1),M=(0,oe.Z)(U,2),I=M[0],L=M[1],K=(0,Ge.Z)(!!c,{value:P||c,onChange:a||d}),G=(0,oe.Z)(K,2),k=G[0],D=G[1],re=(0,h.useRef)(null),fr=(0,h.useCallback)(function(j){re.current===null&&j&&A([]),re.current=j},[]),xe=(0,h.useRef)(),pr=(0,h.useCallback)(function(){var j,Z,$,b=(j=(Z=g.form)!==null&&Z!==void 0?Z:($=g.formRef)===null||$===void 0?void 0:$.current)!==null&&j!==void 0?j:xe.current;b&&t!==null&&t!==void 0&&t.destroyOnClose&&b.resetFields()},[t==null?void 0:t.destroyOnClose,g.form,g.formRef]);(0,h.useEffect)(function(){k&&(P||c)&&(a==null||a(!0),d==null||d(!0))},[c,P,k]);var mr=(0,h.useMemo)(function(){return o?h.cloneElement(o,(0,Y.Z)((0,Y.Z)({key:"trigger"},o.props),{},{onClick:function(){var j=(0,le.Z)((0,Q.Z)().mark(function $(b){var N,S;return(0,Q.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:D(!k),(N=o.props)===null||N===void 0||(S=N.onClick)===null||S===void 0||S.call(N,b);case 2:case"end":return R.stop()}},$)}));function Z($){return j.apply(this,arguments)}return Z}()})):null},[D,o,k]),hr=(0,h.useMemo)(function(){var j,Z,$,b,N,S,q,R;return g.submitter===!1?!1:He()({searchConfig:{submitText:(j=(Z=t==null?void 0:t.okText)!==null&&Z!==void 0?Z:($=F.locale)===null||$===void 0||(b=$.Modal)===null||b===void 0?void 0:b.okText)!==null&&j!==void 0?j:"\u786E\u8BA4",resetText:(N=(S=t==null?void 0:t.cancelText)!==null&&S!==void 0?S:(q=F.locale)===null||q===void 0||(R=q.Modal)===null||R===void 0?void 0:R.cancelText)!==null&&N!==void 0?N:"\u53D6\u6D88"},resetButtonProps:{preventDefault:!0,disabled:s?I:void 0,onClick:function(xr){var de;D(!1),t==null||(de=t.onCancel)===null||de===void 0||de.call(t,xr)}}},g.submitter)},[(v=F.locale)===null||v===void 0||(l=v.Modal)===null||l===void 0?void 0:l.cancelText,(u=F.locale)===null||u===void 0||(r=u.Modal)===null||r===void 0?void 0:r.okText,t,g.submitter,D,I,s]),gr=(0,h.useCallback)(function(j,Z){return(0,e.jsxs)(e.Fragment,{children:[j,re.current&&Z?(0,e.jsx)(h.Fragment,{children:(0,We.createPortal)(Z,re.current)},"submitter"):Z]})},[]),Zr=(0,h.useCallback)(function(){var j=(0,le.Z)((0,Q.Z)().mark(function Z($){var b,N,S;return(0,Q.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return b=p==null?void 0:p($),s&&b instanceof Promise&&(L(!0),N=setTimeout(function(){return L(!1)},s),b.finally(function(){clearTimeout(N),L(!1)})),R.next=4,b;case 4:return S=R.sent,S&&D(!1),R.abrupt("return",S);case 7:case"end":return R.stop()}},Z)}));return function(Z){return j.apply(this,arguments)}}(),[p,D,s]),yr=(0,Ee.X)(k);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,(0,Y.Z)((0,Y.Z)((0,Y.Z)({title:C,width:y||800},t),yr),{},{onCancel:function(Z){var $;s&&I||(D(!1),t==null||($=t.onCancel)===null||$===void 0||$.call(t,Z))},afterClose:function(){var Z;pr(),D(!1),t==null||(Z=t.afterClose)===null||Z===void 0||Z.call(t)},footer:g.submitter!==!1?(0,e.jsx)("div",{ref:fr,style:{display:"flex",justifyContent:"flex-end"}}):null,children:(0,e.jsx)(Ye.I,(0,Y.Z)((0,Y.Z)({formComponentType:"ModalForm",layout:"vertical",formRef:xe},g),{},{submitter:hr,onFinish:function(){var j=(0,le.Z)((0,Q.Z)().mark(function Z($){var b;return(0,Q.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Zr($);case 2:return b=S.sent,S.abrupt("return",b);case 4:case"end":return S.stop()}},Z)}));return function(Z){return j.apply(this,arguments)}}(),contentRender:gr,children:i}))})),mr]})}var X=n(5966),Je=["newPassword2"],Qe=function(f){var v=f.parentIntl,l=f.currentUser,u=new W.f("modify-password",v),r=H.Z.useForm(),i=(0,B.Z)(r,1),o=i[0];return(0,e.jsx)(ye,{title:u.t("title","Modify Password"),trigger:(0,e.jsx)("a",{children:v.t("modify","Modify")}),form:o,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,maskClosable:!1},width:600,onFinish:function(){var d=(0,O.Z)((0,x.Z)().mark(function a(t){var p,s,C;return(0,x.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return p=t.newPassword2,s=(0,ge.Z)(t,Je),p!=s.newPassword&&V.default.error("The passwords entered two times are inconsistent."),c.next=4,(0,E.c0)((0,w.Z)((0,w.Z)({},s),{},{username:l==null?void 0:l.username}));case 4:if(C=c.sent,!C.success){c.next=8;break}return V.default.info("Password updated successfully!"),c.abrupt("return",!0);case 8:return c.abrupt("return",!1);case 9:case"end":return c.stop()}},a)}));return function(a){return d.apply(this,arguments)}}(),children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)(X.Z.Password,{rules:[{required:!0}],width:"lg",name:"oldPassword",label:u.t("old-password","Old password")}),(0,e.jsx)(X.Z.Password,{rules:[{required:!0}],width:"lg",name:"newPassword",label:u.t("new-password","New password")}),(0,e.jsx)(X.Z.Password,{rules:[{required:!0}],width:"lg",name:"newPassword2",label:u.t("new-password","New password")})]})})},Ir=n(13254),Xe=n(14277),qe=n(84059),_e=n(79090),er=function(f){var v=f.parentIntl,l=v===void 0?new W.f("user.settings.security",(0,ne.YB)()):v,u=f.hidden,r=f.reload,i=new W.f("mfa-device",l),o=H.Z.useForm(),d=(0,B.Z)(o,1),a=d[0],t=(0,h.useState)(),p=(0,B.Z)(t,2),s=p[0],C=p[1],y=(0,h.useState)(!1),c=(0,B.Z)(y,2),P=c[0],g=c[1],F=function(){var T=(0,O.Z)((0,x.Z)().mark(function m(){return(0,x.Z)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:C(void 0),g(!0),(0,E.HN)({}).then(function(M){C(M.data)}).finally(function(){g(!1)});case 3:case"end":return U.stop()}},m)}));return function(){return T.apply(this,arguments)}}();return(0,e.jsx)(ye,{title:i.t("bind","Bind MFA"),trigger:(0,e.jsx)("a",{hidden:u,children:l.t("bind","Bind")}),form:a,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0,maskClosable:!1},hidden:u,onOpenChange:function(m){m&&F()},submitter:{submitButtonProps:{disabled:!s,hidden:u}},onFinish:function(){var T=(0,O.Z)((0,x.Z)().mark(function m(A){return(0,x.Z)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!(s!=null&&s.token)){M.next=7;break}return M.next=3,(0,E.Xg)((0,w.Z)((0,w.Z)({},A),{},{token:s.token}));case 3:return r(),M.abrupt("return",!0);case 7:throw new Error("System error: token is null");case 8:case"end":return M.stop()}},m)}));return function(m){return T.apply(this,arguments)}}(),children:(0,e.jsxs)(te.Z,{children:[(0,e.jsx)("p",{children:i.t("code-description","Please obtain two consecutive one-time passwords after scanning and adding MFA and enter them into the input box below.")}),(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{width:220,height:140},children:s!=null&&s.secret?(0,e.jsx)(qe.Qd,{style:{marginLeft:"40px"},value:s==null?void 0:s.secret}):(0,e.jsx)(Xe.Z,{description:"",style:{width:200,height:128},image:P?(0,e.jsx)(_e.Z,{}):void 0})}),(0,e.jsx)("div",{style:{display:"grid",width:"100%"},children:(0,e.jsx)(ve.Z,{onClick:F,type:"link",children:i.t("refresh","Refresh")})})]}),(0,e.jsxs)("div",{style:{marginLeft:"30px"},children:[(0,e.jsx)(X.Z,{rules:[{pattern:/[0-9]{6}/,required:!0}],width:"sm",name:"firstCode",label:i.t("first-code","First code")}),(0,e.jsx)(X.Z,{rules:[{pattern:/[0-9]{6}/,required:!0}],width:"sm",name:"secondCode",label:i.t("second-code","Second code")})]})]})]})})},rr=function(f){(0,me.Z)(l,f);var v=(0,he.Z)(l);function l(u){var r;return(0,fe.Z)(this,l),r=v.call(this,u),r.state={intl:new W.f("security",r.props.parentIntl)},r.t=function(i,o){var d,a=r.state.intl;return(d=a==null?void 0:a.t(i,o))!==null&&d!==void 0?d:""},r.passwordStrength={strong:(0,e.jsx)("span",{className:"strong",children:r.t("strong","Strong")}),medium:(0,e.jsx)("span",{className:"medium",children:r.t("medium","Medium")}),weak:(0,e.jsx)("span",{className:"weak",children:r.t("weak","Weak")})},r.getData=function(){var i,o,d,a,t,p,s,C,y,c,P,g,F,T;return[{title:r.t("password"),actions:[(0,e.jsx)(Ae.rU,{to:Re.A,children:r.t("resetPassword","Reset")},"reset-password"),(0,e.jsx)(Qe,{parentIntl:r.state.intl,currentUser:r.props.currentUser},"modify-password")]},{title:r.t("mfa-phone"),description:"".concat(r.t("mfa-phone-description"),": ").concat((i=(o=r.props.currentUser)===null||o===void 0?void 0:o.phoneNumber)!==null&&i!==void 0?i:""),actions:[(0,e.jsx)(Ze,{request:(0,O.Z)((0,x.Z)().mark(function m(){var A,U;return(0,x.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,E.c9)({sms_as_mfa:!((A=r.props.currentUser)!==null&&A!==void 0&&(U=A.extendedData)!==null&&U!==void 0&&U.smsAsMFA)});case 2:r.props.reload();case 3:case"end":return I.stop()}},m)})),checked:(d=r.props.currentUser)===null||d===void 0||(a=d.extendedData)===null||a===void 0?void 0:a.smsAsMFA,onChange:function(){},size:"small"},"phone")]},{title:r.t("mfa-email"),description:"".concat(r.t("mfa-email-description"),": ").concat((t=(p=r.props.currentUser)===null||p===void 0?void 0:p.email)!==null&&t!==void 0?t:""),actions:[(0,e.jsx)(Ze,{checked:(s=r.props.currentUser)===null||s===void 0||(C=s.extendedData)===null||C===void 0?void 0:C.emailAsMFA,request:(0,O.Z)((0,x.Z)().mark(function m(){var A,U;return(0,x.Z)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,(0,E.c9)({email_as_mfa:!((A=r.props.currentUser)!==null&&A!==void 0&&(U=A.extendedData)!==null&&U!==void 0&&U.emailAsMFA)});case 2:r.props.reload();case 3:case"end":return I.stop()}},m)})),size:"small"},"email")]},{title:r.t("mfa-device"),description:(y=r.props.currentUser)!==null&&y!==void 0&&(c=y.extendedData)!==null&&c!==void 0&&c.totpAsMFA?r.t("mfa-device-description-bound"):r.t("mfa-device-description-unbound"),actions:[(0,e.jsx)(er,{parentIntl:r.state.intl,currentUser:r.props.currentUser,hidden:(P=r.props.currentUser)===null||P===void 0||(g=P.extendedData)===null||g===void 0?void 0:g.totpAsMFA,reload:r.props.reload},"mfa-binding"),(0,e.jsx)("a",{hidden:!((F=r.props.currentUser)!==null&&F!==void 0&&(T=F.extendedData)!==null&&T!==void 0&&T.totpAsMFA),onClick:function(){se.Z.confirm({title:r.t("unbind-confirm","Are you sure you want to unbind the mfa device?"),icon:(0,e.jsx)(Oe.Z,{}),onOk:r.unbindMFADevice(r.props)})},children:r.t("unbind","Unbind")},"mfa-unbind")]}]},r.state={intl:new W.f("security",r.props.parentIntl)},r}return(0,pe.Z)(l,[{key:"unbindMFADevice",value:function(r){return(0,O.Z)((0,x.Z)().mark(function i(){var o;return(0,x.Z)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=V.default.loading("Unbinding ..."),a.prev=1,a.next=4,(0,E.c9)({totp_as_mfa:!1});case 4:return o(),V.default.success("Unbind successfully and will refresh soon"),r.reload(),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(1),console.log(a.t0),o(),V.default.error("Unbind failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},i,null,[[1,10]])}))}},{key:"render",value:function(){var r=this.getData();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.ZP,{itemLayout:"horizontal",dataSource:r,renderItem:function(o){return(0,e.jsx)(ie.ZP.Item,{actions:o.actions,children:(0,e.jsx)(ie.ZP.Item.Meta,{title:o.title,description:o.description})})}})})}}]),l}(h.Component),nr=rr,tr=n(30381),ue=n.n(tr),sr=n(55035),ar=n(16894),ir=function(){var f=(0,O.Z)((0,x.Z)().mark(function v(l){var u;return(0,x.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l){i.next=2;break}return i.abrupt("return",!0);case 2:return u=V.default.loading("Deleting ..."),i.prev=3,i.next=6,(0,E._7)({id:l});case 6:return u(),V.default.success("Deleted successfully and will refresh soon"),i.abrupt("return",!0);case 11:return i.prev=11,i.t0=i.catch(3),u(),V.default.error("Delete failed, please try again"),i.abrupt("return",!1);case 16:case"end":return i.stop()}},v,null,[[3,11]])}));return function(l){return f.apply(this,arguments)}}(),lr=function(v){var l=v.currentUser,u=v.parentIntl,r=new W.f("sessions",u),i=(0,h.useRef)(),o=[{title:r.t("session.title.lastSeen","Last Seen"),dataIndex:"lastSeen",render:function(a,t){return ue()(t.lastSeen).locale(r.locale).fromNow()}},{title:r.t("session.title.expiry","Expiry"),dataIndex:"expiry",render:function(a,t){return ue()(t.expiry).locale(r.locale).fromNow()}},{title:r.t("session.title.loggedOn","Logged on"),dataIndex:"createTime",render:function(a,t){return ue()(t.createTime).locale(r.locale).format("LLL")}},{render:function(a,t){return[(0,e.jsx)("a",{onClick:(0,O.Z)((0,x.Z)().mark(function p(){var s;return(0,x.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,ir(t.id);case 2:if(!y.sent){y.next=4;break}(s=i.current)===null||s===void 0||s.reload();case 4:case"end":return y.stop()}},p)})),children:(0,e.jsx)(sr.Z,{})},"delete")]}}];return l?(0,e.jsx)(ar.ZP,{actionRef:i,toolBarRender:!1,request:function(a){return(0,E.H2)((0,w.Z)((0,w.Z)({},a),{},{userId:l.id}))},columns:o,rowKey:"id",search:!1}):null},or=lr,ur=n(79738),ee=n.n(ur),dr=ce.Z.Item,cr=function(v){var l,u,r,i=v.history,o=new W.f("user.settings",(0,ne.YB)()),d=(0,h.useRef)(null),a={base:o.t("menuMap.basic","Basic Settings"),security:o.t("menuMap.security","Security Settings"),binding:o.t("menuMap.binding","Account Binding"),sessions:o.t("menuMap.sessions","Sessions")},t=(0,ne.tT)("@@initialState"),p=t.initialState,s=t.setInitialState,C=(0,h.useState)(p==null?void 0:p.currentUser),y=(0,B.Z)(C,2),c=y[0],P=y[1],g=function(){var G=c??{},k=G.fetchTime;k&&k+1>Number(new Date)/1e3||(0,E.ar)().then(function(D){D.data&&(s((0,w.Z)((0,w.Z)({},p),{},{currentUser:(0,w.Z)((0,w.Z)({},D.data),{},{fetchTime:Number(new Date)/1e3})})),P((0,w.Z)((0,w.Z)({},D.data),{},{fetchTime:Number(new Date)/1e3})))})};(0,h.useEffect)(function(){g()},[]);var F=(0,h.useState)("base"),T=(0,B.Z)(F,2),m=T[0],A=T[1],U=function(){switch(m){case"base":return(0,e.jsx)(Me,{parentIntl:o,currentUser:c,reload:g});case"security":return(0,e.jsx)(nr,{parentIntl:o,currentUser:c,reload:g});case"binding":return(0,e.jsx)(Te,{});case"sessions":return(0,e.jsx)(or,{parentIntl:o,currentUser:c});default:break}return null},M=function(){return Object.keys(a).map(function(G){return(0,e.jsx)(dr,{children:a[G]},G)})},I=function(){return a[m]},L=(l=p==null?void 0:p.globalConfig)!==null&&l!==void 0?l:null;return(0,e.jsx)($e.ZP,{logo:(u=L==null?void 0:L.logo)!==null&&u!==void 0?u:(0,Ce.Ak)("logo.svg"),title:(r=L==null?void 0:L.title)!==null&&r!==void 0?r:je.Z.title,onMenuHeaderClick:function(){i.push("/")},layout:"top",navTheme:"dark",rightContentRender:function(){return(0,e.jsx)(we.Z,{})},children:(0,e.jsx)(te.Z,{children:(0,e.jsxs)("div",{className:ee().main,ref:d,children:[(0,e.jsx)("div",{className:ee().leftMenu,children:(0,e.jsx)(ce.Z,{mode:"inline",selectedKeys:[m],onClick:function(G){var k=G.key;return A(k)},children:M()})}),(0,e.jsxs)("div",{className:ee().right,children:[(0,e.jsx)("div",{className:ee().title,children:I()}),U()]})]})})})},vr=cr}}]);
