(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[331],{50317:function(B){B.exports={SearchInput:"SearchInput___PEFkt",ProxyUrlInput:"ProxyUrlInput___3liOo"}},7717:function(B,K,s){"use strict";s.d(K,{DV:function(){return H}});var D=s(48736),o=s(27049),c=s(71748),f=s(90860),y=s(47673),w=s(28166),R=s(39428),T=s(86582),$=s(3182),M=s(2824),G=s(93224),Q=s(43358),z=s(66074),g=s(11849),X=s(54421),v=s(38272),O=s(67294),C=s(58533),N=s(2844),L=s(10861),S=s(93400),U=s(50317),Y=s.n(U),u=s(85893),V=["type","loading"],W=function(h){var E=h.users,p=h.onChange,P=h.roles,Z=h.loading,j=h.granting,t=h.parentIntl,a=new S.f("users",t);return(0,u.jsx)(v.ZP,{dataSource:E,size:"small",loading:Z,renderItem:function(r){var e,i;return(0,u.jsxs)(v.ZP.Item,{actions:p&&j?[(0,u.jsx)("a",{onClick:function(){p(E.filter(function(_){return _.id!=r.id}))},children:a.t("userList.delete","Delete")},"grant")]:[],children:[(0,u.jsx)(v.ZP.Item.Meta,{avatar:(0,u.jsx)(N.ZP,{src:"".concat(r.avatar)}),title:r.fullName?r.fullName:r.username,description:r.email}),p&&j&&P.length>0?(0,u.jsx)(z.Z,{onSelect:function(_){p(E.map(function(A){return A.id==r.id?(0,g.Z)((0,g.Z)({},A),{},{roleId:_}):A}))},defaultValue:r&&r.roleId?r.roleId:(e=P.find(function(l){return l.isDefault}))===null||e===void 0?void 0:e.id,options:P.map(function(l){return{key:l.id,value:l.id,label:l.name}})}):(0,u.jsx)("div",{children:r&&r.role?r.role:(i=P.find(function(l){return l.isDefault}))===null||i===void 0?void 0:i.name})]},r.id)}})},H=function(h){var E=h.type,p=E===void 0?"vertical":E,P=h.loading,Z=(0,G.Z)(h,V),j=Z.roles,t=Z.onChange,a=Z.users,n=Z.granting,r=Z.parentIntl,e=new S.f("grant",r),i=(0,O.useState)(!0),l=(0,M.Z)(i,2),_=l[0],A=l[1],de=(0,O.useState)(0),q=(0,M.Z)(de,2),ce=q[0],ee=q[1],me=(0,O.useState)(),ae=(0,M.Z)(me,2),he=ae[0],fe=ae[1],ve=(0,O.useState)([]),re=(0,M.Z)(ve,2),te=re[0],ne=re[1],Ee=(0,O.useState)(!1),se=(0,M.Z)(Ee,2),k=se[0],le=se[1],ue=function(){var I=(0,$.Z)((0,R.Z)().mark(function d(F){var b,ie,J,oe,pe;return(0,R.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,le(!0),m.next=4,(0,L.Rf)((0,g.Z)({current:ce+1,pageSize:20,keywords:he},F));case 4:b=m.sent,b&&b.data?(ie=b.data,J=b.current,oe=b.pageSize,pe=b.total,ne(function(Pe){return[].concat((0,T.Z)(Pe),(0,T.Z)(ie))}),ee(J),pe<J*oe&&A(!1)):A(!1),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(0),m.t0.handled||console.error("failed to get user list: ".concat(m.t0));case 11:return m.prev=11,le(!1),m.finish(11);case 14:case"end":return m.stop()}},d,null,[[0,8,11,14]])}));return function(F){return I.apply(this,arguments)}}(),_e=function(d){ne([]),fe(d),ee(1),ue({keywords:d,current:1})};return(0,O.useEffect)(function(){_e()},[]),(0,u.jsxs)("div",{style:{height:"100%",width:"100%"},children:[n&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{style:{height:p==="vertical"?"calc(100% / 2)":"100%",display:n?"block":"none",width:p==="vertical"?"100%":"calc((100% - 32px) / 2)",float:p==="horizontal"?"left":"unset"},children:[(0,u.jsx)(w.Z.Search,{className:Y().SearchInput,onSearch:function(d){k||_e(d)},loading:k}),(0,u.jsx)("div",{id:"scrollableDiv",style:{height:"calc( 100% - 32px )",overflow:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,u.jsx)(C.Z,{dataLength:te.length,next:ue,hasMore:_,loader:(0,u.jsx)(f.Z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:(0,u.jsx)(o.Z,{plain:!0,children:"End"}),scrollableTarget:"scrollableDiv",children:(0,u.jsx)(v.ZP,{dataSource:te.filter(function(I){return!a.map(function(d){return d.id}).includes(I.id)}),size:"small",loading:k,renderItem:function(d){return(0,u.jsx)(v.ZP.Item,{actions:[(0,u.jsx)("a",{onClick:function(){t([].concat((0,T.Z)(a),[(0,g.Z)((0,g.Z)({},d),{},{role:""})]))},children:e.t("userList.grant","Grant")},"grant")],children:(0,u.jsx)(v.ZP.Item.Meta,{avatar:(0,u.jsx)(N.ZP,{src:"".concat(d.avatar)}),title:d.fullName?d.fullName:d.username,description:d.email})},d.id)}})})})]}),(0,u.jsx)(o.Z,{type:p==="vertical"?"horizontal":"vertical",style:{height:p==="vertical"?"unset":"100%",margin:p==="vertical"?"10px 0":"0 10px",float:p==="horizontal"?"left":"unset",display:n?"":"none"}})]}),(0,u.jsx)("div",{id:"scrollableDiv",style:{height:p!=="vertical"||!n?"100%":"calc((100% - 42px) / 2)",width:p==="horizontal"&&n?"calc((100% - 32px) / 2)":"100%",overflow:"auto",padding:"0 16px",float:p==="horizontal"?"left":"unset",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,u.jsx)(W,{parentIntl:r,users:a,granting:n,roles:j,loading:P,onChange:t})})]})};K.ZP=H},44728:function(B,K,s){"use strict";s.d(K,{C6:function(){return z},ri:function(){return X},BN:function(){return S},KT:function(){return Y},P2:function(){return V},qy:function(){return h},Wo:function(){return p},Rk:function(){return Z}});var D=s(93224),o=s(39428),c=s(11849),f=s(3182),y=s(72709),w=["id"],R=["id"],T=["id"],$=null,M=["appId"],G=["appId"],Q=["appId"];function z(t,a){return g.apply(this,arguments)}function g(){return g=(0,f.Z)((0,o.Z)().mark(function t(a,n){return(0,o.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.WY)("/api/v1/apps",(0,c.Z)({method:"GET",params:(0,c.Z)({},a)},n||{})));case 1:case"end":return e.stop()}},t)})),g.apply(this,arguments)}function X(t,a){return v.apply(this,arguments)}function v(){return v=(0,f.Z)((0,o.Z)().mark(function t(a,n){return(0,o.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,y.WY)("/api/v1/apps",(0,c.Z)({method:"POST",headers:{"Content-Type":"application/json"},data:a},n||{})));case 1:case"end":return e.stop()}},t)})),v.apply(this,arguments)}function O(t,a){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/apps",_objectSpread({method:"DELETE",headers:{"Content-Type":"application/json"},data:a},n||{})));case 1:case"end":return e.stop()}},t)})),C.apply(this,arguments)}function N(t,a){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,n){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/v1/apps",_objectSpread({method:"PATCH",headers:{"Content-Type":"application/json"},data:a},n||{})));case 1:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function S(t,a){return U.apply(this,arguments)}function U(){return U=(0,f.Z)((0,o.Z)().mark(function t(a,n){var r,e;return(0,o.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.id,e=(0,D.Z)(a,w),l.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(r),(0,c.Z)({method:"GET",params:(0,c.Z)({},e)},n||{})));case 2:case"end":return l.stop()}},t)})),U.apply(this,arguments)}function Y(t,a,n){return u.apply(this,arguments)}function u(){return u=(0,f.Z)((0,o.Z)().mark(function t(a,n,r){var e,i;return(0,o.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e=a.id,i=(0,D.Z)(a,R),_.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(e),(0,c.Z)({method:"PUT",headers:{"Content-Type":"application/json"},params:(0,c.Z)({},i),data:n},r||{})));case 2:case"end":return _.stop()}},t)})),u.apply(this,arguments)}function V(t,a){return W.apply(this,arguments)}function W(){return W=(0,f.Z)((0,o.Z)().mark(function t(a,n){var r,e;return(0,o.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.id,e=(0,D.Z)(a,T),l.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(r),(0,c.Z)({method:"DELETE",params:(0,c.Z)({},e)},n||{})));case 2:case"end":return l.stop()}},t)})),W.apply(this,arguments)}function H(t,a,n){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,n,r){var e,i;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e=a.id,i=_objectWithoutProperties(a,$),_.abrupt("return",request("/api/v1/apps/".concat(e),_objectSpread({method:"PATCH",headers:{"Content-Type":"application/json"},params:_objectSpread({},i),data:n},r||{})));case 2:case"end":return _.stop()}},t)})),x.apply(this,arguments)}function h(t,a){return E.apply(this,arguments)}function E(){return E=(0,f.Z)((0,o.Z)().mark(function t(a,n){var r,e;return(0,o.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=a.appId,e=(0,D.Z)(a,M),l.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(r,"/key"),(0,c.Z)({method:"GET",params:(0,c.Z)({},e)},n||{})));case 2:case"end":return l.stop()}},t)})),E.apply(this,arguments)}function p(t,a,n){return P.apply(this,arguments)}function P(){return P=(0,f.Z)((0,o.Z)().mark(function t(a,n,r){var e,i;return(0,o.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e=a.appId,i=(0,D.Z)(a,G),_.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(e,"/key"),(0,c.Z)({method:"POST",headers:{"Content-Type":"application/json"},params:(0,c.Z)({},i),data:n},r||{})));case 2:case"end":return _.stop()}},t)})),P.apply(this,arguments)}function Z(t,a,n){return j.apply(this,arguments)}function j(){return j=(0,f.Z)((0,o.Z)().mark(function t(a,n,r){var e,i;return(0,o.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e=a.appId,i=(0,D.Z)(a,Q),_.abrupt("return",(0,y.WY)("/api/v1/apps/".concat(e,"/key"),(0,c.Z)({method:"DELETE",headers:{"Content-Type":"application/json"},params:(0,c.Z)({},i),data:n},r||{})));case 2:case"end":return _.stop()}},t)})),j.apply(this,arguments)}}}]);
