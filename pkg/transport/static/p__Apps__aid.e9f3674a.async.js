(self.webpackChunkidas_ui=self.webpackChunkidas_ui||[]).push([[326],{50317:function(ge){ge.exports={SearchInput:"SearchInput___PEFkt",ProxyUrlInput:"ProxyUrlInput___3liOo"}},12144:function(ge,$,t){"use strict";t.r($),t.d($,{default:function(){return _e}});var R=t(18106),U=t(58500),ce=t(49111),B=t(19650),pe=t(93224),w=t(58024),h=t(91894),P=t(11849),N=t(57663),a=t(71577),o=t(62350),l=t(24565),e=t(71153),n=t(60331),i=t(2824),u=t(39428),_=t(34792),L=t(48086),j=t(3182),Ee=t(96486),te=t(30381),Se=t.n(te),v=t(67294),d=t(21010),re=t(44728),z=t(14300),De=t(88293),Ze=t(93400),K=t(28508),J=t(55997),S=t(4582),ne=t(71194),G=t(34883),Pe=t(17462),fe=t(76772),he=t(47673),V=t(28166),r=t(85893),se=function(O){var x=O.visible,b=O.onClose,M=O.app,ve=O.parentIntl,p=new Ze.f("keypair.form",ve),ie=(0,v.useState)(!1),oe=(0,i.Z)(ie,2),X=oe[0],ue=oe[1],me=(0,v.useState)(),q=(0,i.Z)(me,2),W=q[0],ee=q[1],m=(0,v.useState)(""),Y=(0,i.Z)(m,2),s=Y[0],F=Y[1];return(0,v.useEffect)(function(){x&&M&&(ue(!1),ee(void 0),F(""))},[M,x]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(G.Z,{title:W?p.t("title.success","Success"):p.t("title","Add App Key"),open:x,onCancel:b,cancelButtonProps:{hidden:Boolean(W)},onOk:(0,j.Z)((0,u.Z)().mark(function C(){var H;return(0,u.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(M!=null&&M.id&&!X)){E.next=12;break}if(s){E.next=4;break}return L.default.error(p.t("name.empty","please input name!")),E.abrupt("return");case 4:return E.next=6,(0,re.Wo)({appId:M.id},{name:s,appId:M.id});case 6:if(H=E.sent,!H.success){E.next=11;break}return ee(H.data),ue(!0),E.abrupt("return");case 11:return E.abrupt("return");case 12:b();case 13:case"end":return E.stop()}},C)})),children:[(0,r.jsx)(V.Z,{hidden:X,value:s,onChange:function(H){F(H.target.value)},required:!X,placeholder:p.t("name.placeholder","Please Input name or description of app key")}),W&&(0,r.jsxs)("div",{children:[(0,r.jsx)(fe.Z,{description:p.t("used.tips","If used for applications such as OAuth, please use Access Secret. If used for radius, please use Secret Hash."),type:"info",showIcon:!0}),p.t("tips","App key pair, please keep it properly."),":",(0,r.jsxs)("ul",{style:{padding:"0px"},children:[(0,r.jsxs)("li",{children:["Access Key: ",(0,r.jsx)(n.Z,{children:W.key})]}),(0,r.jsxs)("li",{children:["Access Secret: ",(0,r.jsx)(n.Z,{children:W.privateKey})]}),(0,r.jsxs)("li",{children:["Secret Hash: ",(0,r.jsx)(n.Z,{children:W.secret})]})]})]})]})})},ae=se,I=t(7717),le=["isDelete","createTime","updateTime"],Q=function(){var Te=(0,j.Z)((0,u.Z)().mark(function O(x,b){var M;return(0,u.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(!x||!b)){p.next=2;break}return p.abrupt("return",!0);case 2:return M=L.default.loading("Deleting ..."),p.prev=3,p.next=6,(0,re.Rk)({appId:b},{appId:b,id:x});case 6:return M(),L.default.success("Deleted successfully and will refresh soon"),p.abrupt("return",!0);case 11:return p.prev=11,p.t0=p.catch(3),M(),L.default.error("Delete failed, please try again"),p.abrupt("return",!1);case 16:case"end":return p.stop()}},O,null,[[3,11]])}));return function(x,b){return Te.apply(this,arguments)}}(),Ce=function(O){var x,b=O.match.params.aid,M=O.history,ve=(0,v.useState)("baisc"),p=(0,i.Z)(ve,2),ie=p[0],oe=p[1],X=(0,v.useState)(),ue=(0,i.Z)(X,2),me=ue[0],q=ue[1],W=(0,v.useState)(),ee=(0,i.Z)(W,2),m=ee[0],Y=ee[1],s=new Ze.f("pages.apps",(0,d.YB)()),F=(0,v.useRef)(),C=(0,v.useRef)(),H=(0,v.useState)(!1),de=(0,i.Z)(H,2),E=de[0],ye=de[1],be=(0,v.useState)([]),D=(0,i.Z)(be,2),je=D[0],We=D[1],Ye=(0,v.useState)([]),Oe=(0,i.Z)(Ye,2),Le=Oe[0],xe=Oe[1],Ne=(0,v.useState)(!1),Ae=(0,i.Z)(Ne,2),Fe=Ae[0],Re=Ae[1],He=(0,v.useState)(!1),Ke=(0,i.Z)(He,2),Ue=Ke[0],Ie=Ke[1],$e=(0,v.useState)(!1),Be=(0,i.Z)($e,2),ze=Be[0],we=Be[1],Ge=function(){return je.map(function(c){var f=c.id,y=c.name,A=c.isDefault,g=c.urls;return{id:f,name:y,isDefault:A,urls:g}})},Ve=[{title:s.t("name.label","Name"),dataIndex:"name"},{title:s.t("description.label","Description"),dataIndex:"description",span:2,ellipsis:!0,contentStyle:{display:"grid"}},{title:s.t("displayName.label","Display Name"),dataIndex:"displayName"},{title:s.t("url.label","URL"),dataIndex:"url",span:2,copyable:!0,render:function(c,f){return(0,r.jsx)("a",{target:"_blank",href:f.url,rel:"noreferrer",children:c})},ellipsis:!0,contentStyle:{display:"contents"}},{title:s.t("grantType.label","Grant Type"),dataIndex:"grantType",valueEnum:(0,De.fs)(z.qJ,s,"grantType.value"),render:function(c,f){return(0,Ee.isArray)(f.grantType)?f.grantType.length>0?f.grantType.map(function(y){return(0,r.jsx)(n.Z,{children:s.formatMessage({id:"grantType.value.".concat(z.qJ[y]),defaultMessage:z.qJ[y]})},y)}):(0,r.jsx)(n.Z,{children:s.formatMessage({id:"grantType.value.".concat(z.qJ[0]),defaultMessage:z.qJ[0]})}):(0,r.jsx)(n.Z,{children:f.grantType})}},{title:s.t("title.grantMode","Grant Mode"),dataIndex:"grantMode",valueEnum:(0,De.fs)(z.FQ,s,"grantMode.value")}],ke=function(){var T=(0,j.Z)((0,u.Z)().mark(function c(){var f,y;return(0,u.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,Re(!0),g.next=4,(0,re.BN)({id:b});case 4:return f=g.sent,f.data&&(y=f.data,Y(y),We(y.roles?y.roles:[]),xe(y.users?y.users:[])),C.current.reload(),g.abrupt("return",f);case 10:return g.prev=10,g.t0=g.catch(0),g.t0.handled||console.error("failed to get app info: ".concat(g.t0)),g.abrupt("return",{success:!1});case 14:return g.prev=14,Re(!1),g.finish(14);case 17:case"end":return g.stop()}},c,null,[[0,10,14,17]])}));return function(){return T.apply(this,arguments)}}(),Je=[{title:s.t("keypair.title.name","Name"),dataIndex:"name",ellipsis:!0},{title:s.t("keypair.title.key","Key"),dataIndex:"key",ellipsis:!0},{title:s.t("keypair.title.createTime","Create Time"),dataIndex:"createTime",width:200,render:function(c,f){return Se()(f.createTime).locale(s.locale).format("LLL")}},{width:40,render:function(c,f){return[(0,r.jsx)(l.Z,{title:s.t("keypair.delete.popconfirm","Are you sure you want to delete the key named {name}? After deletion, the service cannot be accessed using this key pair.",void 0,{name:f.name}),onConfirm:(0,j.Z)((0,u.Z)().mark(function y(){var A;return(0,u.Z)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Q(f.id,f.appId);case 2:if(!k.sent){k.next=4;break}(A=C.current)===null||A===void 0||A.reload();case 4:case"end":return k.stop()}},y)})),children:(0,r.jsx)("a",{children:(0,r.jsx)(K.Z,{})})},"delete")]}}],Qe=[{label:s.t("title.basic","Basic Info"),key:"basic",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.ZP,{column:{xs:1,sm:2,md:3},actionRef:F,request:ke,columns:Ve}),(0,r.jsx)(h.Z,{bodyStyle:{padding:0},headStyle:{padding:0},title:(0,r.jsx)("b",{children:s.t("title.keys","Key-pairs")}),bordered:!1,extra:(0,r.jsx)(a.Z,{type:"primary",onClick:function(){we(!0)},children:s.t("button.create-key","Create Key-pair")}),children:(0,r.jsx)(S.Z,{actionRef:C,toolBarRender:!1,request:function(c){return(0,re.qy)((0,P.Z)((0,P.Z)({},c),{},{appId:b}))},columns:Je,rowKey:"id",search:!1})})]})},{label:s.t("users","User"),key:"users",children:(0,r.jsx)("div",{style:{height:"calc( 100vh - 300px )"},children:(0,r.jsx)(I.DV,{users:Le,roles:je,onChange:xe,loading:Fe,granting:E,parentIntl:s,type:"horizontal"})})},{label:s.t("proxy","Proxy"),key:"proxy",disabled:!((x=m==null?void 0:m.grantType)!==null&&x!==void 0?x:[]).includes(z.qJ.proxy),children:(0,r.jsx)("div",{style:{height:"calc( 100vh - 320px )"},children:"111"})}],Xe=function(){var T=(0,j.Z)((0,u.Z)().mark(function c(f){var y,A,g,k,Me;return(0,u.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!m){Z.next=19;break}return Z.prev=1,Ie(!0),y=m.isDelete,A=m.createTime,g=m.updateTime,k=(0,pe.Z)(m,le),Z.next=6,(0,re.KT)({id:b},(0,P.Z)((0,P.Z)({},k),{},{roles:Ge()},f));case 6:return Me=Z.sent,Me.errorMessage&&L.default.error("failed to update: ".concat(Me.errorMessage)),L.default.info("Successfully updated app information."),Ie(!1),Z.abrupt("return",Me);case 13:Z.prev=13,Z.t0=Z.catch(1),Z.t0.handled||console.error("failed to get user list: ".concat(Z.t0));case 16:return Z.prev=16,Ie(!1),Z.finish(16);case 19:return Z.abrupt("return",{success:!1});case 20:case"end":return Z.stop()}},c,null,[[1,13,16,19]])}));return function(f){return T.apply(this,arguments)}}();return(0,v.useEffect)(function(){var T=[(0,r.jsx)(a.Z,{hidden:!(m!=null&&m.id),type:"primary",onClick:function(){return M.push("/apps/".concat(m==null?void 0:m.id,"/edit"))},children:s.t("button.edit","Edit")},"edit"),(0,r.jsx)(a.Z,{type:"primary",onClick:function(){return F.current.reload()},children:s.t("button.refresh","Refresh")},"refresh")];ie==="users"&&(E?T=[(0,r.jsx)(a.Z,{type:"primary",onClick:(0,j.Z)((0,u.Z)().mark(function c(){return(0,u.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:Xe({users:Le.map(function(A){return{id:A.id,roleId:A.roleId}})}).then(function(A){A.success&&(ye(!1),F.current.reload())});case 1:case"end":return y.stop()}},c)})),loading:Ue,children:s.t("button.save","Save")},"save"),(0,r.jsx)(a.Z,{type:"link",onClick:function(){return ye(!1)},children:s.t("button.cancel","Cancel")},"cancel")]:T.push((0,r.jsx)(a.Z,{type:"primary",onClick:function(){return ye(!0)},children:s.t("button.grant","Grant")}))),q(T)},[ie,E,Le,Ue]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{style:{height:"100%"},bodyStyle:{height:"100%"},children:(0,r.jsx)(U.Z,{items:Qe,onChange:function(c){oe(c)},tabBarExtraContent:(0,r.jsx)(B.Z,{children:me})})}),(0,r.jsx)(ae,{visible:ze,app:m,onClose:function(){we(!1),C.current.reload()},parentIntl:s})]})},_e=Ce},7717:function(ge,$,t){"use strict";t.d($,{DV:function(){return De}});var R=t(48736),U=t(27049),ce=t(71748),B=t(90860),pe=t(47673),w=t(28166),h=t(39428),P=t(86582),N=t(3182),a=t(2824),o=t(93224),l=t(43358),e=t(66074),n=t(11849),i=t(54421),u=t(38272),_=t(67294),L=t(58533),j=t(2844),Ee=t(10861),te=t(93400),Se=t(50317),v=t.n(Se),d=t(85893),re=["type","loading"],z=function(K){var J=K.users,S=K.onChange,ne=K.roles,G=K.loading,Pe=K.granting,fe=K.parentIntl,he=new te.f("users",fe);return(0,d.jsx)(u.ZP,{dataSource:J,size:"small",loading:G,renderItem:function(r){var se,ae;return(0,d.jsxs)(u.ZP.Item,{actions:S&&Pe?[(0,d.jsx)("a",{onClick:function(){S(J.filter(function(le){return le.id!=r.id}))},children:he.t("userList.delete","Delete")},"grant")]:[],children:[(0,d.jsx)(u.ZP.Item.Meta,{avatar:(0,d.jsx)(j.ZP,{src:"".concat(r.avatar)}),title:r.fullName?r.fullName:r.username,description:r.email}),S&&Pe&&ne.length>0?(0,d.jsx)(e.Z,{onSelect:function(le){S(J.map(function(Q){return Q.id==r.id?(0,n.Z)((0,n.Z)({},Q),{},{roleId:le}):Q}))},defaultValue:r&&r.roleId?r.roleId:(se=ne.find(function(I){return I.isDefault}))===null||se===void 0?void 0:se.id,options:ne.map(function(I){return{key:I.id,value:I.id,label:I.name}})}):(0,d.jsx)("div",{children:r&&r.role?r.role:(ae=ne.find(function(I){return I.isDefault}))===null||ae===void 0?void 0:ae.name})]},r.id)}})},De=function(K){var J=K.type,S=J===void 0?"vertical":J,ne=K.loading,G=(0,o.Z)(K,re),Pe=G.roles,fe=G.onChange,he=G.users,V=G.granting,r=G.parentIntl,se=new te.f("grant",r),ae=(0,_.useState)(!0),I=(0,a.Z)(ae,2),le=I[0],Q=I[1],Ce=(0,_.useState)(0),_e=(0,a.Z)(Ce,2),Te=_e[0],O=_e[1],x=(0,_.useState)(),b=(0,a.Z)(x,2),M=b[0],ve=b[1],p=(0,_.useState)([]),ie=(0,a.Z)(p,2),oe=ie[0],X=ie[1],ue=(0,_.useState)(!1),me=(0,a.Z)(ue,2),q=me[0],W=me[1],ee=function(){var Y=(0,N.Z)((0,h.Z)().mark(function s(F){var C,H,de,E,ye;return(0,h.Z)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.prev=0,W(!0),D.next=4,(0,Ee.Rf)((0,n.Z)({current:Te+1,pageSize:20,keywords:M},F));case 4:C=D.sent,C&&C.data?(H=C.data,de=C.current,E=C.pageSize,ye=C.total,X(function(je){return[].concat((0,P.Z)(je),(0,P.Z)(H))}),O(de),ye<de*E&&Q(!1)):Q(!1),D.next=11;break;case 8:D.prev=8,D.t0=D.catch(0),D.t0.handled||console.error("failed to get user list: ".concat(D.t0));case 11:return D.prev=11,W(!1),D.finish(11);case 14:case"end":return D.stop()}},s,null,[[0,8,11,14]])}));return function(F){return Y.apply(this,arguments)}}(),m=function(s){X([]),ve(s),O(1),ee({keywords:s,current:1})};return(0,_.useEffect)(function(){m()},[]),(0,d.jsxs)("div",{style:{height:"100%",width:"100%"},children:[V&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{height:S==="vertical"?"calc(100% / 2)":"100%",display:V?"block":"none",width:S==="vertical"?"100%":"calc((100% - 32px) / 2)",float:S==="horizontal"?"left":"unset"},children:[(0,d.jsx)(w.Z.Search,{className:v().SearchInput,onSearch:function(s){q||m(s)},loading:q}),(0,d.jsx)("div",{id:"scrollableDiv",style:{height:"calc( 100% - 32px )",overflow:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,d.jsx)(L.Z,{dataLength:oe.length,next:ee,hasMore:le,loader:(0,d.jsx)(B.Z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:(0,d.jsx)(U.Z,{plain:!0,children:"End"}),scrollableTarget:"scrollableDiv",children:(0,d.jsx)(u.ZP,{dataSource:oe.filter(function(Y){return!he.map(function(s){return s.id}).includes(Y.id)}),size:"small",loading:q,renderItem:function(s){return(0,d.jsx)(u.ZP.Item,{actions:[(0,d.jsx)("a",{onClick:function(){fe([].concat((0,P.Z)(he),[(0,n.Z)((0,n.Z)({},s),{},{role:""})]))},children:se.t("userList.grant","Grant")},"grant")],children:(0,d.jsx)(u.ZP.Item.Meta,{avatar:(0,d.jsx)(j.ZP,{src:"".concat(s.avatar)}),title:s.fullName?s.fullName:s.username,description:s.email})},s.id)}})})})]}),(0,d.jsx)(U.Z,{type:S==="vertical"?"horizontal":"vertical",style:{height:S==="vertical"?"unset":"100%",margin:S==="vertical"?"10px 0":"0 10px",float:S==="horizontal"?"left":"unset",display:V?"":"none"}})]}),(0,d.jsx)("div",{id:"scrollableDiv",style:{height:S!=="vertical"||!V?"100%":"calc((100% - 42px) / 2)",width:S==="horizontal"&&V?"calc((100% - 32px) / 2)":"100%",overflow:"auto",padding:"0 16px",float:S==="horizontal"?"left":"unset",border:"1px solid rgba(140, 140, 140, 0.35)"},children:(0,d.jsx)(z,{parentIntl:r,users:he,granting:V,roles:Pe,loading:ne,onChange:fe})})]})};$.ZP=De},34952:function(ge,$,t){"use strict";var R=t(22122),U=t(15105),ce=t(67294),B=function(h,P){var N={};for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&P.indexOf(a)<0&&(N[a]=h[a]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(h);o<a.length;o++)P.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(h,a[o])&&(N[a[o]]=h[a[o]]);return N},pe={border:0,background:"transparent",padding:0,lineHeight:"inherit",display:"inline-block"},w=ce.forwardRef(function(h,P){var N=function(_){var L=_.keyCode;L===U.Z.ENTER&&_.preventDefault()},a=function(_){var L=_.keyCode,j=h.onClick;L===U.Z.ENTER&&j&&j()},o=h.style,l=h.noStyle,e=h.disabled,n=B(h,["style","noStyle","disabled"]),i={};return l||(i=(0,R.Z)({},pe)),e&&(i.pointerEvents="none"),i=(0,R.Z)((0,R.Z)({},i),o),ce.createElement("div",(0,R.Z)({role:"button",tabIndex:0,ref:P},n,{onKeyDown:N,onKeyUp:a,style:i}))});$.Z=w},58533:function(ge,$,t){"use strict";var R=t(67294);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var U=function(a,o){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,e){l.__proto__=e}||function(l,e){for(var n in e)e.hasOwnProperty(n)&&(l[n]=e[n])},U(a,o)};function ce(a,o){U(a,o);function l(){this.constructor=a}a.prototype=o===null?Object.create(o):(l.prototype=o.prototype,new l)}var B=function(){return B=Object.assign||function(o){for(var l,e=1,n=arguments.length;e<n;e++){l=arguments[e];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o[i]=l[i])}return o},B.apply(this,arguments)};function pe(a,o,l,e){var n,i=!1,u=0;function _(){n&&clearTimeout(n)}function L(){_(),i=!0}typeof o!="boolean"&&(e=l,l=o,o=void 0);function j(){var Ee=this,te=Date.now()-u,Se=arguments;if(i)return;function v(){u=Date.now(),l.apply(Ee,Se)}function d(){n=void 0}e&&!n&&v(),_(),e===void 0&&te>a?v():o!==!0&&(n=setTimeout(e?d:v,e===void 0?a-te:a))}return j.cancel=L,j}var w={Pixel:"Pixel",Percent:"Percent"},h={unit:w.Percent,value:.8};function P(a){return typeof a=="number"?{unit:w.Percent,value:a*100}:typeof a=="string"?a.match(/^(\d*(\.\d+)?)px$/)?{unit:w.Pixel,value:parseFloat(a)}:a.match(/^(\d*(\.\d+)?)%$/)?{unit:w.Percent,value:parseFloat(a)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),h):(console.warn("scrollThreshold should be string or number"),h)}var N=function(a){ce(o,a);function o(l){var e=a.call(this,l)||this;return e.lastScrollTop=0,e.actionTriggered=!1,e.startY=0,e.currentY=0,e.dragging=!1,e.maxPullDownDistance=0,e.getScrollableTarget=function(){return e.props.scrollableTarget instanceof HTMLElement?e.props.scrollableTarget:typeof e.props.scrollableTarget=="string"?document.getElementById(e.props.scrollableTarget):(e.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},e.onStart=function(n){e.lastScrollTop||(e.dragging=!0,n instanceof MouseEvent?e.startY=n.pageY:n instanceof TouchEvent&&(e.startY=n.touches[0].pageY),e.currentY=e.startY,e._infScroll&&(e._infScroll.style.willChange="transform",e._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},e.onMove=function(n){!e.dragging||(n instanceof MouseEvent?e.currentY=n.pageY:n instanceof TouchEvent&&(e.currentY=n.touches[0].pageY),!(e.currentY<e.startY)&&(e.currentY-e.startY>=Number(e.props.pullDownToRefreshThreshold)&&e.setState({pullToRefreshThresholdBreached:!0}),!(e.currentY-e.startY>e.maxPullDownDistance*1.5)&&e._infScroll&&(e._infScroll.style.overflow="visible",e._infScroll.style.transform="translate3d(0px, "+(e.currentY-e.startY)+"px, 0px)")))},e.onEnd=function(){e.startY=0,e.currentY=0,e.dragging=!1,e.state.pullToRefreshThresholdBreached&&(e.props.refreshFunction&&e.props.refreshFunction(),e.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){e._infScroll&&(e._infScroll.style.overflow="auto",e._infScroll.style.transform="none",e._infScroll.style.willChange="unset")})},e.onScrollListener=function(n){typeof e.props.onScroll=="function"&&setTimeout(function(){return e.props.onScroll&&e.props.onScroll(n)},0);var i=e.props.height||e._scrollableNode?n.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!e.actionTriggered){var u=e.props.inverse?e.isElementAtTop(i,e.props.scrollThreshold):e.isElementAtBottom(i,e.props.scrollThreshold);u&&e.props.hasMore&&(e.actionTriggered=!0,e.setState({showLoader:!0}),e.props.next&&e.props.next()),e.lastScrollTop=i.scrollTop}},e.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:l.dataLength},e.throttledOnScrollListener=pe(150,e.onScrollListener).bind(e),e.onStart=e.onStart.bind(e),e.onMove=e.onMove.bind(e),e.onEnd=e.onEnd.bind(e),e}return o.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},o.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},o.prototype.componentDidUpdate=function(l){this.props.dataLength!==l.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},o.getDerivedStateFromProps=function(l,e){var n=l.dataLength!==e.prevDataLength;return n?B(B({},e),{prevDataLength:l.dataLength}):null},o.prototype.isElementAtTop=function(l,e){e===void 0&&(e=.8);var n=l===document.body||l===document.documentElement?window.screen.availHeight:l.clientHeight,i=P(e);return i.unit===w.Pixel?l.scrollTop<=i.value+n-l.scrollHeight+1:l.scrollTop<=i.value/100+n-l.scrollHeight+1},o.prototype.isElementAtBottom=function(l,e){e===void 0&&(e=.8);var n=l===document.body||l===document.documentElement?window.screen.availHeight:l.clientHeight,i=P(e);return i.unit===w.Pixel?l.scrollTop+n>=l.scrollHeight-i.value:l.scrollTop+n>=i.value/100*l.scrollHeight},o.prototype.render=function(){var l=this,e=B({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),n=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),i=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return R.createElement("div",{style:i,className:"infinite-scroll-component__outerdiv"},R.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(u){return l._infScroll=u},style:e},this.props.pullDownToRefresh&&R.createElement("div",{style:{position:"relative"},ref:function(u){return l._pullDown=u}},R.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!n&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},o}(R.Component);$.Z=N}}]);
